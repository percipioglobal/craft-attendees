var Yn=Object.defineProperty;var sn=Object.getOwnPropertySymbols;var Xn=Object.prototype.hasOwnProperty,Gn=Object.prototype.propertyIsEnumerable;var ln=(e,t,n)=>t in e?Yn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nt=(e,t)=>{for(var n in t||(t={}))Xn.call(t,n)&&ln(e,n,t[n]);if(sn)for(var n of sn(t))Gn.call(t,n)&&ln(e,n,t[n]);return e};import{d as U,_ as Z,s as ye,c as h,t as k,o as p,r as b,w as He,a as s,n as M,b as w,e as Dt,f as Xe,v as $n,g as It,h as Ot,i as Wn,F as K,j as be,k as F,l as B,m as L,p as Ge,q as Kt,T as kn,u as Sn,x as xn,y as vt,z as Kn,A as Jn,B as Qn,C as an,D as Zn,E as eo}from"./plugin-vue_export-helper.f99a0d42.js";import{u as we}from"./trainings.868ee365.js";import{a as to}from"./index.a482147f.js";const no=U({setup(){const e=we(),{showForm:t}=ye(e);return{showForm:t,toggle:()=>{e.setShowFrom(!0)}}}});function oo(e,t,n,o,l,a){return p(),h("button",{class:"bg-emerald-300 text-emerald-800 font-bold py-2 px-3 text-sm rounded-lg cursor-pointer",onClick:t[0]||(t[0]=(...r)=>e.toggle&&e.toggle(...r))},k(e.showForm?"Close form":"Add attendee"),1)}var so=Z(no,[["render",oo]]);const lo=U({props:{label:{type:String,required:!1},name:{type:String,required:!0},label:{type:String,default:""},checked:{default:0}},setup(e,{emit:t}){const n=b(0);return He(()=>{n.value=e.checked==0?0:1}),{toggle:()=>{n.value=n.value==0?1:0,t("changed",n.value)},checkedValue:n}}}),ao={class:"inline-block relative flex items-center cursor-pointer"},ro=["name","value","checked"],io={class:"peer-focus:ring-2 peer-focus:ring-opacity-50 peer-focus:ring-blue-700 peer-focus:shadow-lg outline-none rounded-full inline-block cursor-pointer"},uo={key:0,class:"inline-flex pl-2"};function co(e,t,n,o,l,a){return p(),h("label",ao,[s("input",{name:e.name,type:"checkbox",class:"peer sr-only",onClick:t[0]||(t[0]=(...r)=>e.toggle&&e.toggle(...r)),value:e.checkedValue,checked:e.checkedValue==1},null,8,ro),s("div",io,[s("div",{class:M(["block h-6 rounded-full w-10 cursor-pointer bg-opacity-100",e.checkedValue==1?"bg-emerald-100":"bg-indigo-100"])},null,2),s("div",{class:M(["absolute w-4 h-4 transition rounded-full left-1 top-1 flex items-center not-sr-only",e.checkedValue==1?"bg-emerald-700 transform translate-x-full":"bg-gray-400"])},null,2)]),e.label.length>0?(p(),h("span",uo,k(e.label),1)):w("",!0)])}var Cn=Z(lo,[["render",co]]);const po=U({props:{values:{type:Object,default:{}}},emits:["schoolSelect","schoolInput"],setup(e,{emit:t}){var X,V,G,R,W,le,H,ie,ae,fe,ne,$e,Se,Ie,Oe,Ne;const n=b(null),o=we(),l=b(Math.floor(Math.random()*100)+Date.now()),{attendeeInput:a,attendeeFormErrors:r,schools:d,loadingApi:i}=ye(o),u=b((R=(G=(X=a.value)==null?void 0:X.orgName)!=null?G:(V=e.values)==null?void 0:V.orgName)!=null?R:""),c=b((ie=(H=(W=a.value)==null?void 0:W.orgUrn)!=null?H:(le=e.values)==null?void 0:le.orgUrn)!=null?ie:""),f=b(($e=(ne=(ae=a.value)==null?void 0:ae.postCode)!=null?ne:(fe=e.values)==null?void 0:fe.postCode)!=null?$e:""),v=b((Ne=(Oe=(Se=a.value)==null?void 0:Se.priority)!=null?Oe:(Ie=e.values)==null?void 0:Ie.priority)!=null?Ne:0),g=b(null),y=b(!1),_=b(0),T=b(!0),D=j=>{var oe,ce,Fe,Pe,Me,Re,qe,tt;u.value=(ce=(oe=j.currentTarget)==null?void 0:oe.dataset)==null?void 0:ce.name,c.value=parseInt((Pe=(Fe=j.currentTarget)==null?void 0:Fe.dataset)==null?void 0:Pe.urn),f.value=(Re=(Me=j.currentTarget)==null?void 0:Me.dataset)==null?void 0:Re.postcode,v.value=parseInt((tt=(qe=j.currentTarget)==null?void 0:qe.dataset)==null?void 0:tt.priority),T.value=!1,t("schoolSelect",u.value,c.value,f.value,v.value),y.value=!1,o.clearSchools()},E=()=>{T.value=!0,u.value.length>2&&(y.value=!0,o.fetchSchools(u.value))},A=j=>{var oe;((oe=u.value)==null?void 0:oe.length)===0&&o.clearSchools(),y.value=j},O=()=>{g.value&&clearTimeout(g.value),g.value=setTimeout(E,200)},$=()=>{var j,oe;_.value=_.value<((j=d.value)==null?void 0:j.length)-1?_.value+1:((oe=d.value)==null?void 0:oe.length)-1,n.value.querySelectorAll("li")[_.value].scrollIntoView({block:"nearest"})},q=()=>{_.value=_.value>0?_.value-1:0,n.value.querySelectorAll("li")[_.value].scrollIntoView({block:"nearest"})},Y=()=>{var oe,ce,Fe,Pe,Me,Re,qe;const j={currentTarget:{dataset:{name:(oe=d.value[_.value])==null?void 0:oe.value,urn:(Fe=(ce=d.value[_.value])==null?void 0:ce.data)==null?void 0:Fe.urn,postcode:(Me=(Pe=d.value[_.value])==null?void 0:Pe.data)==null?void 0:Me.postcode,priority:(qe=(Re=d.value[_.value])==null?void 0:Re.data)==null?void 0:qe.priority}}};D(j)},ee=()=>{var j;u.value=null,((j=c.value)==null?void 0:j.length)>0&&P()};Dt(u,(j,oe)=>{var ce;j!==oe&&((ce=c.value)==null?void 0:ce.length)>0&&T.value&&P(),t("schoolInput",j||""),T.value=!0});const P=()=>{c.value=null,f.value=null,v.value=null,t("schoolSelect",u.value,c.value,f.value,v.value),y.value=!1,o.clearSchools()};return{attendeeInput:a,attendeeFormErrors:r,school:u,schools:d,urn:c,priority:v,uniqueId:l,postcode:f,showDropdown:y,schoolDropdown:n,currentSelectionIndex:_,clearResults:T,loadingApi:i,delay:O,handleSchoolSelect:D,handleSchoolInput:E,handleFocus:A,handleClear:ee,onArrowDown:$,onArrowUp:q,selectCurrentSelection:Y}}}),ho=["value"],fo=["value"],go={class:"block mb-6"},mo=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},[F("School / Organisation "),s("span",{class:"text-blue-500"},"*")],-1),vo={class:"w-full relative"},bo=["aria-owns"],yo=["aria-expanded","id"],_o=["data-postcode","data-urn","data-name","data-priority"],wo={class:"block w-full text-sm font-medium"},$o={key:1,class:"p-2 block"},ko={key:1,class:"p-2 pt-3 inline-block"},So=s("svg",{class:"animate-spin mr-1 h-4 w-4 text-gray-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),xo=[So],Co={class:"block mb-6"},Eo=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},"Post code",-1),To=["value","readonly"];function Do(e,t,n,o,l,a){var r,d,i,u,c,f,v;return p(),h(K,null,[s("input",{type:"hidden",name:"orgUrn",value:(r=e.urn)!=null?r:""},null,8,ho),s("input",{type:"hidden",name:"priority",value:(d=e.priority)!=null?d:0},null,8,fo),s("label",go,[mo,s("div",vo,[Xe(s("input",{name:"orgName","onUpdate:modelValue":t[0]||(t[0]=g=>e.school=g),onInput:t[1]||(t[1]=(...g)=>e.delay&&e.delay(...g)),onFocus:t[2]||(t[2]=g=>e.handleFocus(!0)),onBlur:t[3]||(t[3]=g=>e.handleFocus(!1)),onKeydown:[t[4]||(t[4]=It(Ot((...g)=>e.onArrowDown&&e.onArrowDown(...g),["prevent"]),["down"])),t[5]||(t[5]=It(Ot((...g)=>e.onArrowUp&&e.onArrowUp(...g),["prevent"]),["up"])),t[6]||(t[6]=It(Ot((...g)=>e.selectCurrentSelection&&e.selectCurrentSelection(...g),["prevent"]),["enter"]))],class:M(["block peer w-full px-2 py-2 text-sm text-gray-600 box-border bg-gray-100 rounded-lg pr-7",(i=e.attendeeFormErrors)!=null&&i.orgName?"border-solid border-red-300":"border-solid border-gray-100"]),placeholder:"Search for a school or organisation","aria-owns":`metaseed-list-${e.uniqueId}`,"aria-autocomplete":"list",role:"combobox"},null,42,bo),[[$n,e.school]]),((u=e.school)==null?void 0:u.length)>3?(p(),h("span",{key:0,onClick:t[7]||(t[7]=(...g)=>e.handleClear&&e.handleClear(...g)),class:"text-blue-800 bg-gray-100 block w-6 text-center flex items-center justify-center h-8 absolute right-0 top-1 cursor:pointer"},"\u2715")):w("",!0),Xe(s("ul",{class:"absolute left-0 top-full mt-1 w-128 max-h-52 overflow-scroll z-10 bg-gray-100 rounded-lg shadow-xl",ref:"schoolDropdown","aria-expanded":e.showDropdown,role:"listbox",id:`metaseed-list-${e.uniqueId}`},[e.loadingApi?w("",!0):(p(!0),h(K,{key:0},be(e.schools,(g,y)=>{var _,T,D,E,A,O,$,q,Y,ee,P,X,V,G,R;return p(),h("li",{key:(_=g==null?void 0:g.data)==null?void 0:_.urn,role:"option"},[g!=null&&g.data?(p(),h("span",{key:0,onMousedown:t[8]||(t[8]=(...W)=>e.handleSchoolSelect&&e.handleSchoolSelect(...W)),onTouch:t[9]||(t[9]=(...W)=>e.handleSchoolSelect&&e.handleSchoolSelect(...W)),role:"button","data-postcode":(T=g==null?void 0:g.data)==null?void 0:T.postcode,"data-urn":(D=g==null?void 0:g.data)==null?void 0:D.urn,"data-name":g==null?void 0:g.value,"data-priority":(E=g==null?void 0:g.data)==null?void 0:E.priority,class:M(["p-2 pointer-all hover:bg-blue-600 hover:text-white focus:bg-blue-600 block group",e.currentSelectionIndex===y?"bg-blue-600 text-white":""])},[s("span",wo,k(g.value),1),s("span",{class:M(["block text-xs group-hover:text-white",e.currentSelectionIndex===y?"text-white":"text-gray-500"])},"[URN: "+k((O=(A=g==null?void 0:g.data)==null?void 0:A.urn)!=null?O:"-")+"] "+k((q=($=g==null?void 0:g.data)==null?void 0:$.street)!=null?q:"-")+", "+k((ee=(Y=g==null?void 0:g.data)==null?void 0:Y.town)!=null?ee:"-")+" "+k((P=g==null?void 0:g.data)==null?void 0:P.postcode)+" (Age "+k((V=(X=g==null?void 0:g.data)==null?void 0:X.ageFrom)!=null?V:"/")+" - "+k((R=(G=g==null?void 0:g.data)==null?void 0:G.ageTo)!=null?R:"/")+")",3)],42,_o)):(p(),h("span",$o," There's no school that matches the input "))])}),128)),e.loadingApi?(p(),h("li",ko,xo)):w("",!0)],8,yo),[[Wn,e.showDropdown]])])]),s("label",Co,[Eo,s("input",{name:"postCode",value:e.postcode,readonly:((c=e.urn)==null?void 0:c.length)>0,class:M(["block w-full px-2 py-2 text-sm text-gray-600 appearance-none box-border bg-gray-100 rounded-lg",((f=e.urn)==null?void 0:f.length)>0?"text-gray-400 cursor-not-allowed":"",(v=e.attendeeFormErrors)!=null&&v.postCode?"border-solid border-red-300":"border-solid border-gray-100"]),placeholder:"Enter a post code"},null,10,To)])],64)}var Ao=Z(po,[["render",Do]]);const Io=U({props:{approved:{type:Number},urn:{type:Number,default:""},disabled:{type:Boolean,default:!1}},setup(e){const t=b(0),n=b(e.urn);return He(()=>{n.value=e.urn,e.disabled?t.value=0:e.approved==1&&n.value?t.value=1:e.approved==0&&n.value?t.value=2:e.approved==1&&!n.value?t.value=3:e.approved==0&&!n.value?t.value=4:t.value=0}),{status:t,urnVal:n}}}),Oo={class:"absolute right-0 top-8 text-xs text-gray-600"},No={key:0,class:"flex items-center"},Fo=s("span",{class:"inline-block w-3 h-3 bg-gray-400 rounded-full"},null,-1),Po=s("span",null,"Use the fields below to add attendee data. All data must be verified to count towards reporting metrics.",-1),Mo=[Fo,Po],Ro={key:1,class:"flex items-center"},qo=s("span",{class:"inline-block w-3 h-3 bg-emerald-400 rounded-full"},null,-1),Vo=F("School verified and linked to "),Lo=["href"],Bo={key:2,class:"flex items-center"},Ho=s("span",{class:"inline-block w-3 h-3 bg-orange-400 rounded-full"},null,-1),jo=F("School pending verification. Linked to "),zo=["href"],Uo={key:3,class:"flex items-center"},Yo=s("span",{class:"inline-block w-3 h-3 border-2 border-solid border-emerald-400 bg-emerald-100 rounded-full"},null,-1),Xo=s("span",null,"Organisation verified. Not linked to government establishment data",-1),Go=[Yo,Xo],Wo={key:4,class:"flex items-center"},Ko=s("span",{class:"inline-block w-3 h-3 border-2 border-solid border-orange-400 bg-orange-100 rounded-full"},null,-1),Jo=s("span",null,"Organisation pending verification. Not linked to government establishment data.",-1),Qo=[Ko,Jo];function Zo(e,t,n,o,l,a){return p(),h("div",Oo,[e.status===0?(p(),h("p",No,Mo)):w("",!0),e.status===1?(p(),h("p",Ro,[qo,s("span",null,[Vo,s("a",{href:`https://get-information-schools.service.gov.uk/Establishments/Establishment/Details/${e.urnVal}`,class:"underline text-gray-600",target:"_blank"},"government establishment data",8,Lo)])])):w("",!0),e.status===2?(p(),h("p",Bo,[Ho,s("span",null,[jo,s("a",{href:`https://get-information-schools.service.gov.uk/Establishments/Establishment/Details/${e.urnVal}`,class:"underline text-gray-600",target:"_blank"},"government establishment data",8,zo)])])):w("",!0),e.status===3?(p(),h("p",Uo,Go)):w("",!0),e.status===4?(p(),h("p",Wo,Qo)):w("",!0)])}var En=Z(Io,[["render",Zo]]);const es=U({components:{"input-school":Ao,"input-switch":Cn,"status-approved":En},emits:["hideForm","saveAnother","submitForm"],props:{csrf:{type:String,required:!0},event:{type:String,required:!0},site:{type:String,required:!0},title:{type:String},values:{type:Object,default:{}},hideAnother:{type:Boolean,default:!1}},setup(e,{emit:t}){var X,V,G,R,W,le,H,ie,ae,fe,ne,$e,Se,Ie,Oe,Ne,j,oe,ce,Fe,Pe,Me,Re,qe,tt,nn,on;const n=b(null);b(null),b(null);const o=b(!1),l=b((V=(X=e.values)==null?void 0:X.orgUrn)!=null?V:null),a=b((W=(G=e.values)==null?void 0:G.approved)!=null?W:((R=l.value)==null?void 0:R.length)>0?1:0),r=b((H=(le=e.values)==null?void 0:le.orgName)!=null?H:""),d=b((ne=(fe=(ie=e.attendeeInput)==null?void 0:ie.name)!=null?fe:(ae=e.values)==null?void 0:ae.name)!=null?ne:""),i=b((Oe=(Ie=($e=e.attendeeInput)==null?void 0:$e.email)!=null?Ie:(Se=e.values)==null?void 0:Se.email)!=null?Oe:""),u=b((ce=(oe=(Ne=e.attendeeInput)==null?void 0:Ne.jobRole)!=null?oe:(j=e.values)==null?void 0:j.jobRole)!=null?ce:""),c=b((Re=(Me=(Fe=e.attendeeInput)==null?void 0:Fe.newsletter)!=null?Me:(Pe=e.values)==null?void 0:Pe.newsletter)!=null?Re:0),f=b((on=(nn=(qe=e.attendeeInput)==null?void 0:qe.anonymous)!=null?nn:(tt=e.values)==null?void 0:tt.anonymous)!=null?on:0),v=we(),{attendeeInput:g,attendeeFormErrors:y,loading:_,showForm:T,resetAttendeeInput:D}=ye(v),E=pe=>{if(pe.preventDefault(),t("saveAnother",o.value),n.value){let je=new FormData(n.value);v.submitAttendee(je),t("submitForm")}},A=pe=>{o.value=pe.currentTarget.dataset.saveanother},O=()=>{v.resetForm(),t("hideForm")},$=pe=>{pe.keyCode===27&&O()},q=(pe,je,Oc)=>{l.value=je,a.value=je?1:0},Y=pe=>{r.value=pe},ee=()=>{a.value=a.value==1?0:1},P=pe=>{f.value=pe,pe===1&&(c.value=0,d.value="",i.value="",u.value="na")};return He(()=>{var pe,je;(pe=n.value)==null||pe.querySelectorAll('input[name="orgName"]')[0].focus(),T.value&&((je=n.value)==null||je.querySelectorAll('input[name="orgName"]')[0].focus())}),{form:n,attendeeInput:g,attendeeFormErrors:y,loading:_,showForm:T,urn:l,name:d,email:i,jobRole:u,newsletter:c,anonymous:f,approved:a,school:r,handleSubmitButton:A,handleSubmit:E,hideForm:O,keyup:$,handleSchoolInput:Y,handleSchoolSelect:q,handleSchoolVerifyChange:ee,handleAnonymous:P}}}),ts=s("input",{type:"hidden",name:"action",value:"actions/craft-attendees/training/save"},null,-1),ns=["value"],os=["value"],ss=["value"],ls=["value"],as={class:"grid grid-cols-3 gap-x-4 border-b border-blue-100 mb-6 border-solid"},rs={class:"block mb-6"},is=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},"School is verified",-1),ds={class:"grid grid-cols-3 gap-x-4"},us={class:"block mb-6"},cs=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},[F("Name of attendee "),s("span",{class:"text-blue-500"},"*")],-1),ps={class:"relative"},hs=["value"],fs={key:0,class:"bg-gray-100 absolute left-0 top-0 w-full h-full rounded-lg flex"},gs=s("span",{class:"italic text-gray-400 px-2",style:{"margin-bottom":"0px!important"}},"Anonymous attendee",-1),ms=[gs],vs={class:"block mb-6"},bs=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},"Email address of attendee",-1),ys={class:"relative"},_s=["value"],ws={key:0,class:"bg-gray-100 absolute left-0 top-0 w-full h-full rounded-lg flex"},$s=s("span",{class:"italic text-gray-400 px-2",style:{"margin-bottom":"0px!important"}},"Anonymous attendee",-1),ks=[$s],Ss={class:"block mb-6"},xs=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},"Attendee is anonymous?",-1),Cs={class:"grid grid-cols-3 gap-x-4"},Es={class:"block mb-6"},Ts=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},[F("Attendee's job role "),s("span",{class:"text-blue-500"},"*")],-1),Ds=["value"],As=Ge('<option value="" default disabled class="text-gray-400">Select the job role of the attendee</option><option value="na">Not Applicable</option><option value="support">Support Staff</option><option value="leader-middle">Middle leader</option><option value="leader">Leadership</option><option value="teacher">Teacher</option>',6),Is=[As],Os={class:"block mb-6"},Ns=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},[F("Modules attended "),s("span",{class:"text-blue-500"},"*")],-1),Fs=["value"],Ps=Ge('<option default value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option>',15),Ms=[Ps],Rs={class:"block mb-6"},qs=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},"Subscribe for the newsletter",-1),Vs={class:"text-right"},Ls={key:0,class:"animate-spin -ml-1 mr-1 h-3 w-3 text-emerald-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Bs=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Hs=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),js=[Bs,Hs],zs=F(" Save and add another "),Us={key:0,class:"animate-spin -ml-1 mr-1 h-3 w-3 text-emerald-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ys=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Xs=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Gs=[Ys,Xs],Ws=F(" Save ");function Ks(e,t,n,o,l,a){var u,c,f,v,g,y,_,T,D,E,A,O,$,q,Y,ee,P,X,V,G,R,W,le,H,ie,ae,fe;const r=L("status-approved"),d=L("input-school"),i=L("input-switch");return p(),h(K,null,[B(r,{approved:parseInt((c=(u=e.attendeeInput)==null?void 0:u.approved)!=null?c:e.approved),urn:e.urn,disabled:e.school.length===0},null,8,["approved","urn","disabled"]),s("form",{ref:"form",method:"post",action:"","accept-charset":"UTF-8",class:"mt-8",onKeyup:t[3]||(t[3]=(...ne)=>e.keyup&&e.keyup(...ne)),onSubmit:t[4]||(t[4]=(...ne)=>e.handleSubmit&&e.handleSubmit(...ne))},[ts,s("input",{type:"hidden",name:"event",value:e.event},null,8,ns),s("input",{type:"hidden",name:"CRAFT_CSRF_TOKEN",value:e.csrf},null,8,os),s("input",{type:"hidden",name:"siteId",value:e.site},null,8,ss),s("input",{type:"hidden",name:"attendeeId",value:(y=(g=(f=e.attendeeInput)==null?void 0:f.id)!=null?g:(v=e.values)==null?void 0:v.id)!=null?y:""},null,8,ls),s("div",as,[B(d,{values:e.values,onSchoolSelect:e.handleSchoolSelect,onSchoolInput:e.handleSchoolInput},null,8,["values","onSchoolSelect","onSchoolInput"]),s("label",rs,[is,B(i,{name:"approved",checked:(T=(_=e.attendeeInput)==null?void 0:_.approved)!=null?T:e.approved,onChanged:e.handleSchoolVerifyChange},null,8,["checked","onChanged"])])]),s("div",ds,[s("label",us,[cs,s("div",ps,[s("input",{name:"name",value:(E=(D=e.attendeeInput)==null?void 0:D.name)!=null?E:e.name,class:M(["block w-full px-2 py-2 text-sm text-gray-600 appearance-none box-border bg-gray-100 rounded-lg",e.anonymous?"pointer-event-none":"",(A=e.attendeeFormErrors)!=null&&A.name?"border-solid border-red-300":"border-solid border-gray-100"]),placeholder:"Enter the name of the attendee"},null,10,hs),e.anonymous?(p(),h("span",fs,ms)):w("",!0)])]),s("label",vs,[bs,s("div",ys,[s("input",{name:"email",value:($=(O=e.attendeeInput)==null?void 0:O.email)!=null?$:e.email,class:M(["block w-full px-2 py-2 text-sm text-gray-600 appearance-none box-border bg-gray-100 rounded-lg",e.anonymous?"pointer-event-none":"",(q=e.attendeeFormErrors)!=null&&q.email?"border-solid border-red-300":"border-solid border-gray-100"]),placeholder:"Enter the email of the attendee"},null,10,_s),e.anonymous?(p(),h("span",ws,ks)):w("",!0)])]),s("label",Ss,[xs,B(i,{name:"anonymous",checked:(X=(P=(Y=e.attendeeInput)==null?void 0:Y.anonymous)!=null?P:(ee=e.values)==null?void 0:ee.anonymous)!=null?X:0,onChanged:e.handleAnonymous},null,8,["checked","onChanged"])])]),s("div",Cs,[s("label",Es,[Ts,s("select",{name:"jobRole",value:(G=(V=e.attendeeInput)==null?void 0:V.jobRole)!=null?G:e.jobRole,class:M(["block h-10 px-1 rounded-md bg-gray-100 w-full",(R=e.attendeeFormErrors)!=null&&R.jobRole?"border-solid border-red-300":"border-none"])},Is,10,Ds)]),s("label",Os,[Ns,s("select",{name:"days",value:(ie=(H=(W=e.attendeeInput)==null?void 0:W.days)!=null?H:(le=e.values)==null?void 0:le.days)!=null?ie:1,class:M(["block h-10 px-1 rounded-md border-none w-40 bg-gray-100",(ae=e.attendeeFormErrors)!=null&&ae.days?"border-solid border-red-300":""])},Ms,10,Fs)]),s("label",Rs,[qs,B(i,{name:"newsletter",checked:(fe=e.newsletter)!=null?fe:0},null,8,["checked"])])]),s("div",Vs,[s("span",{role:"button",class:"inline-block bg-gray-300 text-gray-800 font-bold py-2 px-3 mr-2 text-sm rounded-lg cursor-pointer",onClick:t[0]||(t[0]=(...ne)=>e.hideForm&&e.hideForm(...ne))},"Cancel"),e.hideAnother?w("",!0):(p(),h("button",{key:0,class:"bg-emerald-300 text-emerald-800 font-bold py-2 px-3 text-sm rounded-lg cursor-pointer inline-block mr-2","data-saveanother":!0,onClick:t[1]||(t[1]=(...ne)=>e.handleSubmitButton&&e.handleSubmitButton(...ne))},[e.loading?(p(),h("svg",Ls,js)):w("",!0),zs])),s("button",{class:"bg-emerald-300 text-emerald-800 font-bold py-2 px-3 text-sm rounded-lg cursor-pointer inline-block","data-saveanother":!1,onClick:t[2]||(t[2]=(...ne)=>e.handleSubmitButton&&e.handleSubmitButton(...ne))},[e.loading?(p(),h("svg",Us,Gs)):w("",!0),Ws])])],544)],64)}var Jt=Z(es,[["render",Ks]]);const Js=U({components:{"form-attendee":Jt},props:{csrf:{type:String,required:!0},attendees:{type:Array,required:!0},show:{type:Boolean,required:!0}},setup(e,{emit:t}){const n=we(),{showForm:o,attendeeSuccess:l}=ye(n);return{showForm:o,handleCancel:()=>{t("hidePopup","cancel")},handleDelete:()=>{let d={};d.CRAFT_CSRF_TOKEN=e.csrf,d.action="actions/craft-attendees/training/delete",d.attendees=e.attendees,n.deleteAttendees(d),t("hidePopup","delete")}}}}),Qs={class:"max-h-screen text-center overflow-auto fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-80"},Zs={class:"bg-white p-6 rounded-xl mb-10"},el={class:"text-lg"},tl=F("Delete "),nl={key:0},ol={key:1},sl={class:"flex justify-center"},ll=F(" Yes, delete "),al={key:0},rl={key:1};function il(e,t,n,o,l,a){return p(),h("div",{class:M(["transition-all duration-500 delay-50 ease-in-out fixed left-0 top-0 w-screen h-screen",e.show?"z-[100] opacity-100 bg-gray-900 bg-opacity-50":"z-0 opacity-0 pointer-events-none"])},[s("div",Qs,[s("div",Zs,[s("h3",el,[tl,e.attendees.length<2?(p(),h("span",nl,"attendee")):(p(),h("span",ol,k(e.attendees.length)+" attendees",1))]),s("div",sl,[s("button",{onClick:t[0]||(t[0]=(...r)=>e.handleCancel&&e.handleCancel(...r)),class:"block bg-gray-300 text-gray-800 font-bold mt-2 py-2 px-3 text-sm rounded-lg cursor-pointer"}," Cancel "),s("button",{onClick:t[1]||(t[1]=(...r)=>e.handleDelete&&e.handleDelete(...r)),class:"block bg-red-300 text-red-800 font-bold mt-2 py-2 px-3 text-sm rounded-lg cursor-pointer"},[ll,e.attendees.length<2?(p(),h("span",al,"attendee")):(p(),h("span",rl,"attendees"))])])])])],2)}var Qt=Z(Js,[["render",il]]);const Tn=function(){return document.ontouchstart!==null?"click":"touchstart"},kt="__vue_click_away__",Dn=function(e,t,n){An(e);let o=n.context,l=t.value,a=!1;setTimeout(function(){a=!0},0),e[kt]=function(r){if((!e||!e.contains(r.target))&&l&&a&&typeof l=="function")return l.call(o,r)},document.addEventListener(Tn(),e[kt],!1)},An=function(e){document.removeEventListener(Tn(),e[kt],!1),delete e[kt]},dl=function(e,t,n){t.value!==t.oldValue&&Dn(e,t,n)},In={mounted:Dn,updated:dl,unmounted:An},ul=U({components:{"popup-delete-attendee":Qt},emits:["reset"],directives:{ClickAway:In},props:{attendees:{type:Array,required:!0},csrf:{type:String,required:!0}},setup(e,{emit:t}){const n=we(),{loading:o}=ye(n),l=b(!1),a=b(!1),r=b(""),d=()=>{l.value=!l.value},i=c=>{a.value=!a.value,l.value=!1,c!=="delete"&&(r.value="delete")},u=()=>{l.value=!1};return Dt(o,(c,f)=>{c!==f&&(l.value=!1,r.value==="delete"&&t("reset"))}),{show:l,showDelete:a,loading:o,onClickAway:u,handleActionsToggle:d,handleDeleteToggle:i}}}),cl={class:"relative"},pl=F("Actions "),hl=s("span",{class:"inline-block ml-1 text-lg -mt-2",style:{"margin-bottom":"0!important"}},"\u2304",-1),fl=[pl,hl],gl={key:0,class:"absolute top-full right-0 z-10 min-w-40 bg-white drop-shadow-xl rounded-md mt-2"},ml={class:"whitespace-nowrap"},vl={key:0,class:"animate-spin ml-2 mt-1 h-4 w-4 text-gray-400 inline-block -mt-px",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",style:{"margin-bottom":"0!important"}},bl=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),yl=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),_l=[bl,yl],wl={key:0,class:"absolute left-0 top-0 z-10 w-full h-full"};function $l(e,t,n,o,l,a){const r=L("popup-delete-attendee"),d=Sn("click-away");return p(),h(K,null,[Xe((p(),h("div",cl,[s("button",{class:"bg-blue-600 text-white font-bold py-2 px-3 text-sm rounded-lg cursor-pointer flex items-center",onClick:t[0]||(t[0]=(...i)=>e.handleActionsToggle&&e.handleActionsToggle(...i))},fl),B(kn,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Kt(()=>[e.show?(p(),h("ul",gl,[s("li",ml,[s("button",{class:"p-3 w-full text-left cursor-pointer text-red-600 font-bold flex flex-nowrap",onClick:t[1]||(t[1]=(...i)=>e.handleDeleteToggle&&e.handleDeleteToggle(...i))},[F(" Delete selection ("+k(e.attendees.length)+") ",1),e.loading?(p(),h("svg",vl,_l)):w("",!0)])])])):w("",!0)]),_:1}),B(r,{show:e.showDelete,csrf:e.csrf,attendees:e.attendees,onHidePopup:e.handleDeleteToggle},null,8,["show","csrf","attendees","onHidePopup"])])),[[d,e.onClickAway]]),e.loading?(p(),h("div",wl,"\xA0 ")):w("",!0)],64)}var kl=Z(ul,[["render",$l]]);const Sl=U({components:{"popup-delete-attendee":Qt},emits:["fetch"],directives:{ClickAway:In},setup(e,{emit:t}){const n=we(),{order:o,loading:l}=ye(n),a=b(!1),r=b([{id:1,action:"date",label:"Date Created"},{id:2,action:"org",label:"School / Organisation"},{id:3,action:"attendee",label:"Attendee"},{id:4,action:"approved",label:"Verified"}]),d=b(r.value[0]);return{loading:l,order:o,actions:r,show:a,selected:d,onClickAway:()=>{a.value=!1},handleActionsToggle:()=>{a.value=!a.value},handleSort:f=>{a.value=!1,d.value=r.value.find(v=>v.action===f),t("fetch",f)}}}}),xl={class:"relative"},Cl=s("span",{class:"inline-block ml-1 text-lg -mt-2",style:{"margin-bottom":"0!important"}},"\u2304",-1),El={key:0,class:"absolute top-full left-0 z-10 min-w-40 bg-white drop-shadow-xl rounded-md mt-2"},Tl=["onClick"],Dl={key:0,class:"absolute left-0 top-0 z-10 w-full h-full"};function Al(e,t,n,o,l,a){const r=Sn("click-away");return p(),h(K,null,[Xe((p(),h("div",xl,[s("button",{class:"bg-white text-blue-600 font-bold py-2 px-3 text-sm rounded-lg cursor-pointer flex items-center",onClick:t[0]||(t[0]=(...d)=>e.handleActionsToggle&&e.handleActionsToggle(...d))},[F("Sort By: "+k(e.selected.label)+" ",1),Cl]),B(kn,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Kt(()=>[e.show?(p(),h("ul",El,[(p(!0),h(K,null,be(e.actions,d=>(p(),h("li",{class:"whitespace-nowrap",key:d.action},[s("button",{class:M(["p-3 w-full text-left cursor-pointer font-bold flex flex-nowrap hover:text-blue-600",e.order===d.action?"text-blue-600":"text-gray-600"]),onClick:i=>e.handleSort(d.action)},k(d.label),11,Tl)]))),128))])):w("",!0)]),_:1})])),[[r,e.onClickAway]]),e.loading?(p(),h("div",Dl,"\xA0 ")):w("",!0)],64)}var Il=Z(Sl,[["render",Al]]);const Ol=U({props:{show:{type:Boolean,default:!1}}});function Nl(e,t,n,o,l,a){return p(),h("div",{class:M(["fixed left-1/2 top-0 z-[100] bg-emerald-400 text-emerald-800 px-8 py-2 rounded-bl-lg rounded-br-lg font-bold transition-all duration-500",e.show?"opacity-100":"opacity-0 pointer-events-none"])},"Saved succesfully",2)}var Fl=Z(Ol,[["render",Nl]]);const Pl=U({props:{values:{type:Object,default:{}}},emits:["schoolSelect","schoolInput"],setup(e,{emit:t}){var T,D,E,A,O,$,q,Y,ee,P,X,V,G,R,W,le;const n=b(null),o=we(),l=b(Math.floor(Math.random()*100)+Date.now()),{attendeeInput:a,attendeeFormErrors:r,schools:d,loadingApi:i}=ye(o),u=b((A=(E=(T=a.value)==null?void 0:T.orgName)!=null?E:(D=e.values)==null?void 0:D.orgName)!=null?A:""),c=b((Y=(q=(O=a.value)==null?void 0:O.orgUrn)!=null?q:($=e.values)==null?void 0:$.orgUrn)!=null?Y:""),f=b((V=(X=(ee=a.value)==null?void 0:ee.postCode)!=null?X:(P=e.values)==null?void 0:P.postCode)!=null?V:""),v=b((le=(W=(G=a.value)==null?void 0:G.priority)!=null?W:(R=e.values)==null?void 0:R.priority)!=null?le:0);b(null);const g=b(!0);o.fetchSchools(u.value);const y=H=>{var ie,ae,fe,ne,$e,Se,Ie,Oe,Ne,j,oe,ce;u.value===((ae=(ie=H.currentTarget)==null?void 0:ie.dataset)==null?void 0:ae.name)&&c.value===((ne=(fe=H.currentTarget)==null?void 0:fe.dataset)==null?void 0:ne.urn)?_():(u.value=(Se=($e=H.currentTarget)==null?void 0:$e.dataset)==null?void 0:Se.name,c.value=(Oe=(Ie=H.currentTarget)==null?void 0:Ie.dataset)==null?void 0:Oe.urn,f.value=(j=(Ne=H.currentTarget)==null?void 0:Ne.dataset)==null?void 0:j.postcode,v.value=(ce=(oe=H.currentTarget)==null?void 0:oe.dataset)==null?void 0:ce.priority,t("schoolSelect",u.value,c.value,f.value,v.value))},_=()=>{u.value="",c.value=null,f.value="",v.value=0,t("schoolSelect",null,null,null)};return{attendeeInput:a,attendeeFormErrors:r,school:u,schools:d,priority:v,urn:c,uniqueId:l,postcode:f,schoolDropdown:n,clearResults:g,loadingApi:i,handleSchoolSelect:y,handleClear:_}}}),Ml=["value"],Rl=["value"],ql={class:"block mb-6"},Vl=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},"Saved school or organisation",-1),Ll={class:"w-full relative"},Bl=["aria-owns"],Hl={class:"block mb-6"},jl=s("span",{class:"text-xs font-bold text-gray-400 block mb-1"},"Do you mean one of these schools?",-1),zl={class:"bg-gray-100 rounded-xl w-full max-h-60 overflow-auto",ref:"schoolDropdown",role:"listbox"},Ul=["data-postcode","data-urn","data-name"],Yl={class:"rounded-md border border-gray-400 border-solid w-4 h-4 bg-white flex-grow-0 flex-shrink-0 relative text-blue-600"},Xl={key:0,class:"font-bold absolute left-1/2 top-1/2 transform -translate-y-1/2 -translate-x-1/2"},Gl={class:"pl-2"},Wl={key:1,class:"p-4 block"},Kl={key:1,class:"p-2 pt-3 inline-block"},Jl=s("svg",{class:"animate-spin mr-1 h-4 w-4 text-gray-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Ql=[Jl];function Zl(e,t,n,o,l,a){var r,d;return p(),h(K,null,[s("input",{type:"hidden",name:"orgUrn",value:(r=e.urn)!=null?r:""},null,8,Ml),s("input",{type:"hidden",name:"priority",value:(d=e.priority)!=null?d:0},null,8,Rl),s("label",ql,[Vl,s("div",Ll,[Xe(s("input",{name:"orgName","onUpdate:modelValue":t[0]||(t[0]=i=>e.values.orgName=i),disabled:"",class:M(["block peer w-full px-2 py-2 text-sm text-gray-600 box-border bg-gray-50 rounded-lg pr-7 border-solid border-gray-50"]),"aria-owns":`metaseed-list-${e.uniqueId}`,"aria-autocomplete":"list",role:"combobox"},null,8,Bl),[[$n,e.values.orgName]])])]),s("label",Hl,[jl,s("ul",zl,[e.loadingApi?w("",!0):(p(!0),h(K,{key:0},be(e.schools,(i,u)=>{var c,f,v,g,y,_,T,D,E,A,O,$,q,Y,ee,P,X,V,G;return p(),h("li",{key:(f=(c=i==null?void 0:i.data)==null?void 0:c.urn)!=null?f:u,role:"option"},[i!=null&&i.data?(p(),h("span",{key:0,onMousedown:t[1]||(t[1]=(...R)=>e.handleSchoolSelect&&e.handleSchoolSelect(...R)),onTouch:t[2]||(t[2]=(...R)=>e.handleSchoolSelect&&e.handleSchoolSelect(...R)),role:"button","data-postcode":(v=i==null?void 0:i.data)==null?void 0:v.postcode,"data-urn":(g=i==null?void 0:i.data)==null?void 0:g.urn,"data-name":i==null?void 0:i.value,class:M(["p-4 cursor-pointer flex flex-nowrap focus:bg-blue-600 group","border-b border-gray-200 border-solid",e.school==i.value&&e.urn===((y=i==null?void 0:i.data)==null?void 0:y.urn)?"bg-blue-600 hover:bg-blue-600":"bg-gray-100 hover:bg-gray-200"])},[s("div",Yl,[e.school==i.value&&e.urn===((_=i==null?void 0:i.data)==null?void 0:_.urn)?(p(),h("span",Xl,"\u2713")):w("",!0)]),s("div",Gl,[s("span",{class:M(["block w-full text-sm font-medium",e.school==i.value&&e.urn===((T=i==null?void 0:i.data)==null?void 0:T.urn)?"text-white":"text-gray-500"]),style:{"margin-bottom":"0!important"}},k(i.value),3),s("span",{class:M(["block text-xs",e.school==i.value&&e.urn===((D=i==null?void 0:i.data)==null?void 0:D.urn)?"text-white":"text-gray-500"]),style:{"margin-bottom":"0!important"}}," [URN: "+k((A=(E=i==null?void 0:i.data)==null?void 0:E.urn)!=null?A:"-")+"] "+k(($=(O=i==null?void 0:i.data)==null?void 0:O.street)!=null?$:"-")+", "+k((Y=(q=i==null?void 0:i.data)==null?void 0:q.town)!=null?Y:"-")+" "+k((ee=i==null?void 0:i.data)==null?void 0:ee.postcode)+" (Age "+k((X=(P=i==null?void 0:i.data)==null?void 0:P.ageFrom)!=null?X:"/")+" - "+k((G=(V=i==null?void 0:i.data)==null?void 0:V.ageTo)!=null?G:"/")+") ",3)])],42,Ul)):(p(),h("span",Wl," There's no school that matches the saved school or organisation "))])}),128)),e.loadingApi?(p(),h("li",Kl,Ql)):w("",!0)],512)])],64)}var ea=Z(Pl,[["render",Zl]]);const ta=U({components:{"input-school":ea},emits:["hidePopup","edit"],props:{csrf:{type:String,required:!0},attendee:{type:Object,required:!0},show:{type:Boolean,required:!0}},setup(e,{emit:t}){const n=we(),o=b({school:e.attendee.orgName,urn:e.attendee.urn,postcode:e.attendee.postCode});return{handleCancel:()=>{n.clearSchools(),t("hidePopup")},handleVerify:()=>{var u,c,f;let i=nt({},e.attendee);i.orgName=(u=o.value.school)!=null?u:e.attendee.orgName,i.orgUrn=(c=o.value.urn)!=null?c:e.attendee.orgUrn,i.postCode=(f=o.value.postcode)!=null?f:e.attendee.postCode,i.approved=1,i.CRAFT_CSRF_TOKEN=e.csrf,i.event=e.attendee.eventId,i.attendeeId=e.attendee.id,i.action="actions/craft-attendees/training/save",n.submitAttendee(i),n.clearSchools(),t("hidePopup")},handleSchoolSelect:(i,u,c)=>{i||u||c?o.value={school:i,urn:u,postcode:c}:o.value={school:e.attendee.orgName,urn:e.attendee.urn,postcode:e.attendee.postcode}},handleEdit:()=>{t("edit")}}}}),na={class:"max-h-screen overflow-auto fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 xl:w-1/3"},oa={class:"bg-white p-6 rounded-xl mb-10"},sa={class:"w-full mb-8"},la={class:"text-lg whitespace-nowrap text-ellipsis overflow-hidden text-center"},aa={class:"text-sm"},ra=F("Attendee data needs to be verified against the government establishment data. Using organisation name provided you will find some suggestions below. Click the correct school to verify the data."),ia=s("br",null,null,-1),da=s("br",null,null,-1),ua=F("If "),ca=F(" is not associated with a school, you can still verify without selecting a school."),pa={class:"flex"},ha={class:"flex-grow"};function fa(e,t,n,o,l,a){const r=L("input-school");return p(),h("div",{class:M(["transition-all duration-500 delay-50 ease-in-out fixed left-0 top-0 w-screen h-screen",e.show?"z-[100] opacity-100 bg-gray-900 bg-opacity-50":"z-0 opacity-0 pointer-events-none"])},[s("div",na,[s("div",oa,[s("div",sa,[s("h3",la,"Verify "+k(e.attendee.name),1),s("p",aa,[ra,ia,da,ua,s("strong",null,k(e.attendee.name),1),ca])]),B(r,{values:e.attendee,onSchoolSelect:e.handleSchoolSelect},null,8,["values","onSchoolSelect"]),s("div",pa,[s("div",ha,[s("button",{onClick:t[0]||(t[0]=(...d)=>e.handleEdit&&e.handleEdit(...d)),class:"block bg-gray-300 text-gray-800 font-bold mt-2 py-2 px-3 text-sm rounded-lg cursor-pointer"}," Edit ")]),s("button",{onClick:t[1]||(t[1]=(...d)=>e.handleCancel&&e.handleCancel(...d)),class:"block bg-gray-300 text-gray-800 font-bold mt-2 py-2 px-3 text-sm rounded-lg cursor-pointer"}," Cancel "),s("button",{onClick:t[2]||(t[2]=(...d)=>e.handleVerify&&e.handleVerify(...d)),class:"block bg-emerald-300 text-emerald-800 font-bold mt-2 py-2 px-3 text-sm rounded-lg cursor-pointer"}," Verify organisation ")])])])],2)}var rn=Z(ta,[["render",fa]]);const ga=U({components:{PopupVerifyAttendee:rn,"form-attendee":Jt,"popup-delete-attendee":Qt,"popup-verify-attendee":rn,"status-approved":En},props:{attendee:{type:Object,required:!0},csrf:{type:String,required:!0},event:{type:String,required:!0},site:{type:String,required:!0},checked:{type:Boolean,default:!1}},setup(e,{emit:t}){const n=b(!1),o=b(!1),l=we(),{attendeeSuccess:a,loading:r}=ye(l),d=b(!1),i=b(!1),u=b(!1),c=b(e.checked),f=b({na:"Not Applicable",support:"Support","leader-middle":"Middle leader",leader:"Leadership",teacher:"Teacher"}),v=()=>{n.value=!n.value},g=()=>{o.value=!o.value},y=()=>{i.value=!1,u.value=!1},_=()=>{i.value=!0},T=()=>{d.value=!0},D=()=>{u.value=!0},E=()=>{let $=nt({},e.attendee);$.approved=0,$.CRAFT_CSRF_TOKEN=e.csrf,$.event=e.event,$.attendeeId=e.attendee.id,$.action="actions/craft-attendees/training/save",l.submitAttendee($)},A=()=>{t("tick",e.attendee.id)},O=()=>{i.value=!1,u.value=!1,o.value=!0,n.value=!0};return He(()=>{d.value&&a.value&&(o.value=!1,d.value=!1)}),Dt(()=>e.checked,($,q)=>{c.value=$,t("tick",e.attendee.id)}),{expanded:n,edit:o,checkedState:c,loading:r,showDeletePopup:i,showVerifyPopup:u,jobRoles:f,toggle:v,handleEdit:g,submitEdit:T,handleApprove:D,handleDisapprove:E,handleDelete:_,handleHidePopup:y,handleCheckbox:A,handleEditPopup:O}}}),ma={class:"grid grid-cols-9 xl:grid-cols-11 w-full items-center"},va={class:"col-span-3 p-3 flex flex-nowrap items-center font-bold cursor-pointer"},ba={class:"inline-flex mb-0"},ya={key:0,class:"text-blue-600"},_a={key:0,class:"italic text-gray-400"},wa={key:1},$a={key:0,class:"italic text-gray-400"},ka={key:1,class:"w-full whitespace-nowrap text-ellipsis overflow-hidden"},Sa={class:"box-border p-3"},xa={key:1,class:"block w-4 h-4 xl:inline-block xl:w-auto xl:h-auto rounded-full text-xs bg-emerald-400 text-white text-bold xl:px-4 xl:py-1"},Ca=s("span",{class:"opacity-0 pointer-events-none xl:opacity-100"},"Verified",-1),Ea=[Ca],Ta={class:"text-right pr-8 box-border"},Da=["href"],Aa={key:1,class:"pr-1"},Ia={key:0,class:"px-10 py-6 relative"},Oa={class:"pt-6 relative"},Na=s("h3",{class:"text-lg"},"Attendee details",-1),Fa={key:1,class:"absolute left-0 top-0 bg-white bg-opacity-50 z-10 w-full h-full"},Pa=s("div",{class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[s("svg",{class:"animate-spin -ml-1 mr-1 mt-1 h-10 w-10 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])],-1),Ma=[Pa],Ra={key:2,class:"w-full pt-5"},qa={class:"grid grid-cols-3 gap-x-4"},Va={class:"mb-6"},La=s("span",{class:"text-xs font-bold text-gray-400 block"},"School / Organisation",-1),Ba={class:"text-base mt-1 block"},Ha={key:0,class:"text-blue-600"},ja={class:"mb-6"},za=s("span",{class:"text-xs font-bold text-gray-400 block"},"School or organisation post code",-1),Ua={class:"text-base mt-1 block"},Ya={class:"mb-6"},Xa=s("span",{class:"text-xs font-bold text-gray-400 block mb-2"},"Verified status",-1),Ga={key:0,class:"inline-block rounded-full text-xs bg-orange-300 text-orange-800 text-bold px-4 py-1"},Wa={key:1,class:"inline-block rounded-full text-xs bg-emerald-400 text-white text-bold px-4 py-1"},Ka={class:"grid grid-cols-3 gap-x-4"},Ja={class:"mb-6"},Qa=s("span",{class:"text-xs font-bold text-gray-400 block"},"Name of the attendee",-1),Za={key:0,class:"text-base mt-1 block italic text-gray-400"},er={key:1,class:"text-base mt-1 block"},tr={class:"mb-6"},nr=s("span",{class:"text-xs font-bold text-gray-400 block"},"Email address of attendee",-1),or={key:0,class:"text-base mt-1 block italic text-gray-400"},sr={key:1,class:"text-base mt-1 block"},lr={class:"mb-6"},ar=s("span",{class:"text-xs font-bold text-gray-400 block"},"Attendee is anonymous?",-1),rr={class:"text-base mt-1 block"},ir={class:"grid grid-cols-3 gap-x-4"},dr={class:"mb-6"},ur=s("span",{class:"text-xs font-bold text-gray-400 block"},"Attendee's job role",-1),cr={class:"text-base mt-1 block"},pr={class:"mb-6"},hr=s("span",{class:"text-xs font-bold text-gray-400 block"},"Modules attended",-1),fr={class:"text-base mt-1 block"},gr={class:"mb-6"},mr=s("span",{class:"text-xs font-bold text-gray-400 block"},"Subscribed for the newsletter?",-1),vr={class:"text-base mt-1 block"},br={class:"text-right"};function yr(e,t,n,o,l,a){var c,f,v,g,y,_,T,D,E,A,O;const r=L("status-approved"),d=L("form-attendee"),i=L("popup-delete-attendee"),u=L("popup-verify-attendee");return p(),h("div",{tabindex:"0",class:M(["w-full border-l-2 border-solid",e.expanded?"bg-blue-100 bg-opacity-10":"border-white",((c=e.attendee)==null?void 0:c.approved)&&e.expanded?"border-emerald-300":"",(e.attendee.approved==0||!e.attendee.approved)&&e.expanded?"border-orange-300":""])},[s("div",ma,[s("div",va,[s("span",ba,[Xe(s("input",{type:"checkbox",onChange:t[0]||(t[0]=(...$)=>e.handleCheckbox&&e.handleCheckbox(...$)),"onUpdate:modelValue":t[1]||(t[1]=$=>e.checkedState=$)},null,544),[[xn,e.checkedState]])]),s("span",{class:"inline-block pl-2 flex-grow",onClick:t[2]||(t[2]=(...$)=>e.toggle&&e.toggle(...$))},[F(k(e.attendee.orgName)+"\xA0",1),((f=e.attendee.priority)!=null?f:0)===1?(p(),h("span",ya,"\u2691")):w("",!0)])]),s("div",{class:"col-span-2 box-border p-3 cursor-pointer flex items-center",onClick:t[3]||(t[3]=(...$)=>e.toggle&&e.toggle(...$))},[((v=e.attendee)==null?void 0:v.anonymous)==1?(p(),h("span",_a,"Anonymous attendee")):(p(),h("span",wa,k(e.attendee.name),1))]),s("div",{class:"col-span-1 xl:col-span-3 box-border p-3 cursor-pointer flex items-center",onClick:t[4]||(t[4]=(...$)=>e.toggle&&e.toggle(...$))},[((g=e.attendee)==null?void 0:g.anonymous)==1?(p(),h("span",$a,"Anonymous attendee")):(p(),h("span",ka,k(e.attendee.email),1))]),s("div",{class:"box-border p-3 cursor-pointer flex items-center",onClick:t[5]||(t[5]=(...$)=>e.toggle&&e.toggle(...$))},k(e.attendee.days),1),s("div",Sa,[e.attendee.approved==0||!e.attendee.approved?(p(),h("button",{key:0,onClick:t[6]||(t[6]=(...$)=>e.handleApprove&&e.handleApprove(...$)),class:"inline-block font-bold bg-orange-300 text-orange-800 py-1 px-3 text-sm rounded-lg cursor-pointer"}," Verify ")):(p(),h("span",xa,Ea))]),s("div",Ta,[e.attendee.orgUrn&&(e.attendee.approved==1||e.attendee.approved)?(p(),h("a",{key:0,href:`https://get-information-schools.service.gov.uk/Establishments/Establishment/Details/${(y=e.attendee)==null?void 0:y.orgUrn}`,target:"_blank",class:"text-blue-800 text-xl"}," \u2197 ",8,Da)):(p(),h("span",Aa,"-"))])]),e.expanded?(p(),h("div",Ia,[s("div",Oa,[Na,e.edit?w("",!0):(p(),vt(r,{key:0,approved:parseInt(e.attendee.approved),urn:e.attendee.orgUrn},null,8,["approved","urn"])),e.loading?(p(),h("div",Fa,Ma)):w("",!0),e.edit?w("",!0):(p(),h("div",Ra,[s("div",qa,[s("div",Va,[La,s("span",Ba,[F(k(e.attendee.orgName)+"\xA0",1),((_=e.attendee.priority)!=null?_:0)===1?(p(),h("span",Ha,"\u2691")):w("",!0)])]),s("div",ja,[za,s("span",Ua,k(e.attendee.postCode),1)]),s("div",Ya,[Xa,e.attendee.approved==0||!e.attendee.approved?(p(),h("span",Ga,"Unverified")):(p(),h("span",Wa,"Verified"))])]),s("div",Ka,[s("div",Ja,[Qa,((T=e.attendee)==null?void 0:T.anonymous)==1?(p(),h("span",Za,"Anonymous attendee")):w("",!0),((D=e.attendee)==null?void 0:D.anonymous)!==1?(p(),h("span",er,k(e.attendee.name),1)):w("",!0)]),s("div",tr,[nr,((E=e.attendee)==null?void 0:E.anonymous)==1?(p(),h("span",or,"Anonymous attendee")):w("",!0),((A=e.attendee)==null?void 0:A.anonymous)!==1?(p(),h("span",sr,k(e.attendee.email),1)):w("",!0)]),s("div",lr,[ar,s("span",rr,k(e.attendee.anonymous==1?"Yes":"No"),1)])]),s("div",ir,[s("div",dr,[ur,s("span",cr,k((O=e.jobRoles[e.attendee.jobRole])!=null?O:"-"),1)]),s("div",pr,[hr,s("span",fr,k(e.attendee.days),1)]),s("div",gr,[mr,s("span",vr,k(e.attendee.newsletter==1?"Yes":"No"),1)])]),s("div",br,[s("button",{onClick:t[7]||(t[7]=(...$)=>e.handleDelete&&e.handleDelete(...$)),class:"inline-block bg-red-300 text-red-800 font-bold mr-2 py-2 px-3 text-sm rounded-lg cursor-pointer"}," Delete "),e.attendee.approved==0||!e.attendee.approved?(p(),h("button",{key:0,onClick:t[8]||(t[8]=(...$)=>e.handleApprove&&e.handleApprove(...$)),class:"inline-block bg-emerald-300 text-emerald-800 font-bold mr-2 py-2 px-3 text-sm rounded-lg cursor-pointer"}," Verify ")):(p(),h("button",{key:1,onClick:t[9]||(t[9]=(...$)=>e.handleDisapprove&&e.handleDisapprove(...$)),class:"inline-block bg-orange-300 text-orange-800 font-bold py-2 px-3 text-sm rounded-lg cursor-pointer mr-2"}," Unverify ")),s("button",{onClick:t[10]||(t[10]=(...$)=>e.handleEdit&&e.handleEdit(...$)),class:"inline-block bg-gray-300 text-gray-800 py-2 px-3 text-sm font-bold rounded-lg cursor-pointer"},"Edit")])])),e.edit?(p(),vt(d,{key:3,csrf:e.csrf,values:e.attendee,event:e.event,site:e.site,onHideForm:e.handleEdit,onSubmitForm:e.submitEdit,hideAnother:!0},null,8,["csrf","values","event","site","onHideForm","onSubmitForm"])):w("",!0),B(i,{show:e.showDeletePopup,csrf:e.csrf,attendees:[e.attendee.id],onHidePopup:e.handleHidePopup},null,8,["show","csrf","attendees","onHidePopup"])])])):w("",!0),e.showVerifyPopup?(p(),vt(u,{key:1,csrf:e.csrf,attendee:e.attendee,show:e.showVerifyPopup,onHidePopup:e.handleHidePopup,onEdit:e.handleEditPopup},null,8,["csrf","attendee","show","onHidePopup","onEdit"])):w("",!0)],2)}var _r=Z(ga,[["render",yr]]);const wr=U({components:{"list-item-attendee":_r,"input-actions":kl,"input-sort":Il,"status-saved":Fl},props:{event:{type:String,required:!0},csrf:{type:String,required:!0},site:{type:String,required:!0}},setup(e){const t=we(),{attendees:n,loading:o,totalAttendees:l,attendeeSuccess:a,order:r}=ye(t),d=b(30),i=b(0),u=b(0),c=b(!1),f=b([]);b();const v=b(!1),g=()=>{i.value=i.value+d.value,t.fetchAttendees(e.event,r.value,d.value,i.value,!1)},y=D=>{const E=f.value.findIndex(A=>A===D);E>-1?f.value.splice(E,1):f.value.push(D)},_=()=>{f.value=[]},T=D=>{i.value=0,t.fetchAttendees(e.event,D,d.value,i.value,!0)};return He(()=>{u.value=l.value-i.value-d.value,a.value&&(c.value=!0,setTimeout(()=>{c.value=!1,t.attendeeSuccess=!1},3e3))}),t.fetchAttendees(e.event,"date",d.value,i.value,!0),{showSuccess:c,attendees:n,loading:o,offset:i,totalAttendees:l,remainingEntries:u,selectedAttendees:f,showTicks:v,handleFetch:T,handleReset:_,handleLoadMore:g,handleListItemChange:y}}}),$r={class:"flex items-center"},kr=s("div",{class:"flex-grow"},null,-1),Sr={class:"flex"},xr={class:"grid grid-cols-9 xl:grid-cols-11 bg-gray-100 py-2 items-center"},Cr={class:"col-span-3 p-3 text-left text-xs font-semibold text-gray-600 uppercase flex flex-nowrap items-center"},Er={class:"inline-flex mb-0"},Tr=["indeterminate"],Dr=s("span",{class:"inline-flex pl-2"},"School / Organisation",-1),Ar=Ge('<div class="col-span-2 p-3 text-left text-xs font-semibold text-gray-600 uppercase"> Name of attendee </div><div class="col-span-1 xl:col-span-3 p-3 text-left text-xs font-semibold text-gray-600 uppercase"> Email </div><div class="p-3 text-left text-xs font-semibold text-gray-600 uppercase"> Modules </div><div class="p-3 text-left text-xs font-semibold text-gray-600 uppercase"> Status </div><div class="p-3 text-right pr-8 text-lg font-semibold text-gray-600 uppercase">\u2197</div>',5),Ir={class:"rounded-xl bg-white overflow-hidden min-h-16"},Or={key:0,class:"w-full pt-2"},Nr={key:1,class:"animate-spin ml-4 mt-5 mb-3 h-6 w-6 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Fr=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Pr=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Mr=[Fr,Pr],Rr={key:2,class:"p-6"},qr={class:"ml-4 mt-4 relative text-center"},Vr={class:"inline-block text-gray-500 absolute left-0 top-1/2 -translate-y-1/2"};function Lr(e,t,n,o,l,a){var c;const r=L("status-saved"),d=L("input-sort"),i=L("input-actions"),u=L("list-item-attendee");return p(),h(K,null,[B(r,{show:e.showSuccess},null,8,["show"]),s("div",$r,[kr,s("div",Sr,[B(d,{onFetch:e.handleFetch},null,8,["onFetch"]),B(i,{csrf:e.csrf,attendees:e.selectedAttendees,onReset:e.handleReset},null,8,["csrf","attendees","onReset"])])]),s("div",xr,[s("div",Cr,[s("span",Er,[Xe(s("input",{type:"checkbox",indeterminate:e.selectedAttendees.length>0,"onUpdate:modelValue":t[0]||(t[0]=f=>e.showTicks=f)},null,8,Tr),[[xn,e.showTicks]])]),Dr]),Ar]),s("div",Ir,[e.attendees&&e.attendees.length>0?(p(),h("div",Or,[(p(!0),h(K,null,be(e.attendees,(f,v)=>(p(),h("article",{key:f.id,class:M([e.attendees.length-1!==v?"border-b border-gray-100 border-solid":""])},[B(u,{event:e.event,csrf:e.csrf,site:e.site,attendee:f,checked:e.showTicks,onTick:e.handleListItemChange},null,8,["event","csrf","site","attendee","checked","onTick"])],2))),128))])):w("",!0),e.loading?(p(),h("svg",Nr,Mr)):w("",!0),(!e.attendees||e.attendees.length===0)&&!e.loading?(p(),h("p",Rr,"There are currently no attendees for this event")):w("",!0)]),s("div",qr,[s("span",Vr,"Total results: "+k(!e.attendees||e.attendees.length>0?(c=e.attendees)==null?void 0:c.length:"0"),1),s("button",{class:M(["bg-gray-300 text-gray-800 font-bold py-2 px-3 text-sm rounded-lg cursor-pointer",e.remainingEntries>0?"":"opacity-0 pointer-events-none"]),onClick:t[1]||(t[1]=(...f)=>e.handleLoadMore&&e.handleLoadMore(...f))},"Load more ("+k(e.remainingEntries)+")",3)])],64)}var Br=Z(wr,[["render",Lr]]),_n,wn;const Hr=(wn=(_n=window.Attendee)==null?void 0:_n.cpUrl)!=null?wn:"https://researchschool.org.uk/cp",On=Kn("logs",{state:()=>({logs:null,loading:!1}),actions:{fetchLogs(e){const t=this;this.loading=!0,to({method:"get",url:`${Hr}/craft-attendees/trainings/logs/${e}`}).then(function(n){t.loading=!1,t.logs=n.data.logs})}}}),jr=U({props:{log:{type:Object,required:!0},filename:{type:String,required:!0}},setup(e){let{log:t}=Jn(e);const n=On(),{loading:o}=ye(n),l=b(!1),a=b(e.log.sort((c,f)=>c.line<f.line)),r=b(e.log.filter(c=>c.type==="error")),d=b(e.log.filter(c=>c.type==="success")),i=b("-"),u=()=>{l.value=!l.value};return Dt(t,(c,f)=>{a.value=c.sort((v,g)=>v.line<g.line),r.value=c.filter(v=>v.type==="error"),d.value=c.filter(v=>v.type==="success"),r.value.length+d.value.length===parseInt(c[0].totalLines)?i.value="Done":i.value="In Progress"}),{status:i,logs:a,success:d,errors:r,expanded:l,loading:o,toggle:u}}}),zr={class:"grid grid-cols-9 py-2 items-center w-full items-center"},Ur={class:"text-red-600 inline-block mr-4"},Yr={class:"text-emerald-600 inline-block"},Xr={key:0,class:"px-10 py-6 relative"},Gr={class:"flex items-center relative mb-4"},Wr=s("h3",{class:"text-lg inline-block flex-grow"},"Error details",-1),Kr=s("svg",{class:"animate-spin h-4 w-4 text-gray-600 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Jr=s("span",null,"Pulling new logs",-1),Qr=[Kr,Jr],Zr=Ge('<div class="w-full grid grid-cols-9 border-b border-gray-200 border-solid pb-2 mb-2"><div class="py-3 text-left text-xs font-semibold text-gray-600 uppercase flex flex-nowrap items-center"> CSV Line </div><div class="col-span-2 py-3 text-left text-xs font-semibold text-gray-600 uppercase flex flex-nowrap items-center"> Attendee </div><div class="col-span-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase flex flex-nowrap items-center"> Error </div><div class="col-span-2 py-3 text-left text-xs font-semibold text-gray-600 uppercase flex flex-nowrap items-center"> Date Created </div></div>',1),ei={class:"col-span-2"},ti={class:"col-span-4"},ni={class:"col-span-2"};function oi(e,t,n,o,l,a){return p(),h("div",{tabindex:"0",class:M(["w-full border-l-2 border-solid",e.expanded?"bg-blue-100 bg-opacity-10 border-red-300":"border-white"])},[s("div",zr,[s("div",{class:"p-3 font-bold cursor-pointer",onClick:t[0]||(t[0]=(...r)=>e.toggle&&e.toggle(...r))},[s("span",null,k(e.status),1)]),s("div",{class:"p-3 font-bold cursor-pointer",onClick:t[1]||(t[1]=(...r)=>e.toggle&&e.toggle(...r))},[s("span",Ur,"\u26A0 "+k(e.errors.length),1)]),s("div",{class:"p-3 font-bold cursor-pointer",onClick:t[2]||(t[2]=(...r)=>e.toggle&&e.toggle(...r))},[s("span",Yr,"\u2713 "+k(e.success.length),1)]),s("div",{class:"p-3 font-bold",onClick:t[3]||(t[3]=(...r)=>e.toggle&&e.toggle(...r))},k(e.log.totalLines),1),s("div",{class:"col-span-2 p-3 cursor-pointer",onClick:t[4]||(t[4]=(...r)=>e.toggle&&e.toggle(...r))},k(e.filename),1),s("div",{class:"col-span-2 p-3 cursor-pointer",onClick:t[5]||(t[5]=(...r)=>e.toggle&&e.toggle(...r))},k(e.log[0].dateCreated),1),s("div",{class:"p-3 text-blue-800 cursor-pointer",onClick:t[6]||(t[6]=(...r)=>e.toggle&&e.toggle(...r))},k(e.expanded?"Hide":"Show")+" logs ",1)]),e.expanded?(p(),h("div",Xr,[s("div",Gr,[Wr,s("span",{class:M(["text-xs flex items-center mt-2 transition ease-in-out",e.loading&&e.status!=="Done"?"opacity-100":"opacity-0"])},Qr,2)]),Zr,(p(!0),h(K,null,be(e.logs,r=>(p(),h(K,{key:`${r.line}.${e.filename}`},[r.type==="error"?(p(!0),h(K,{key:0},be(JSON.parse(r.message),d=>(p(),h("div",{class:"w-full grid grid-cols-9 py-2 border-b border-solid border-gray-100",key:`${r.line}.${e.filename}.${r.line}`},[s("div",null,k(r.line),1),s("div",ei,k(r.attendee),1),s("div",ti,k(d[0]),1),s("div",ni,k(r.dateCreated),1)]))),128)):w("",!0)],64))),128))])):w("",!0)],2)}var si=Z(jr,[["render",oi]]);const li=U({components:{"list-item-log":si},props:{event:{type:String,required:!0}},setup(e){const t=On(),{logs:n,loading:o}=ye(t),l=b(100),a=b(0),r=b({});return b(null),t.fetchLogs(e.event,l.value,a.value),He(()=>{n.value&&(r.value=n.value.reduce((i,u)=>(i[u.filepath]=[...i[u.filepath]||[],u],i),{}))}),{groupedLogs:r,loading:o,logs:n,refresh:()=>{t.fetchLogs(e.event,l.value,a.value)}}}}),ai={class:"grid grid-cols-9 bg-gray-100 py-2 items-center"},ri=Ge('<div class="p-3 text-left text-xs font-semibold text-gray-600 uppercase flex flex-nowrap items-center"> Status </div><div class="p-3 text-left text-xs font-semibold text-gray-600 uppercase flex flex-nowrap items-center"> Errors </div><div class="p-3 text-left text-xs font-semibold text-gray-600 uppercase flex flex-nowrap items-center"> Success </div><div class="p-3 text-left text-xs font-semibold text-gray-600 uppercase"> Total rows </div><div class="col-span-2 p-3 text-left text-xs font-semibold text-gray-600 uppercase"> File </div><div class="col-span-2 p-3 text-left text-xs font-semibold text-gray-600 uppercase"> Date </div>',6),ii={class:"rounded-xl bg-white overflow-hidden min-h-16"},di={key:0,class:"w-ful"},ui={key:1,class:"animate-spin ml-4 mt-5 mb-3 h-6 w-6 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ci=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),pi=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),hi=[ci,pi],fi={key:2,class:"p-6"};function gi(e,t,n,o,l,a){const r=L("list-item-log");return p(),h(K,null,[s("div",ai,[ri,s("div",null,[s("button",{class:"bg-emerald-300 text-emerald-800 font-bold py-2 px-3 text-xs rounded-lg cursor-pointer",onClick:t[0]||(t[0]=(...d)=>e.refresh&&e.refresh(...d))},"Refresh Logs")])]),s("div",ii,[Object.keys(e.groupedLogs).length>0?(p(),h("div",di,[(p(!0),h(K,null,be(e.groupedLogs,(d,i,u)=>{var c;return p(),h("article",{key:u,class:M([Object.keys(e.groupedLogs).length-1!==u?"border-b border-gray-100 border-solid":""])},[B(r,{log:d,filename:(c=d[0].filename)!=null?c:i},null,8,["log","filename"])],2)}),128))])):w("",!0),Object.keys(e.groupedLogs).length===0&&e.loading?(p(),h("svg",ui,hi)):w("",!0),Object.keys(e.groupedLogs).length===0&&!e.loading?(p(),h("p",fi,"There are currently no logs for this event")):w("",!0)])],64)}var mi=Z(li,[["render",gi]]);const vi=U({components:{"input-switch":Cn},props:{event:{type:String,required:!0},csrf:{type:String,required:!0}},setup(e){const t=we(),{followOnSupportOptions:n,followOnSupportSelectedOptions:o,loading:l}=ye(t),a=d=>{let i={};i.value=d,i.CRAFT_CSRF_TOKEN=e.csrf,i.event=e.event,i.action="actions/craft-attendees/training/saveOption",t.saveOption(i)},r=d=>t.followOnSupportSelectedOptions.filter(u=>u.optionId==d.id).length>0?1:0;return t.fetchOptions(e.event),{followOnSupportOptions:n,followOnSupportSelectedOptions:o,loading:l,handleChange:a,getChecked:r}}}),bi={class:"bg-white w-full p-6 rounded-xl box-border"},yi={key:0,class:"bg-gray-200 bg-opacity-50 absolute left-0 top-0 w-full h-full"},_i=Ge('<div class="absolute left-1/2 top-1/2 -translate-y-1/2 -translate-x-1/2"><svg class="animate-spin h-10 w-10 text-gray-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><div class="block bg-gray-200 bg-opacity-50 w-6 left-full pb-6 top-0 h-full absolute z-10"></div><div class="block bg-gray-200 bg-opacity-50 h-6 top-full left-0 w-full absolute z-10"></div>',3),wi=[_i];function $i(e,t,n,o,l,a){const r=L("input-switch");return p(),h(K,null,[s("div",bi,[(p(!0),h(K,null,be(e.followOnSupportOptions,d=>(p(),h("div",{key:d.value,class:"block flex items-center"},[B(r,{name:"option",checked:e.getChecked(d),label:d.name,value:d.value,onChanged:i=>e.handleChange(d.value)},null,8,["checked","label","value","onChanged"])]))),128))]),e.loading?(p(),h("div",yi,wi)):w("",!0)],64)}var ki=Z(vi,[["render",$i]]);const Si=U({components:{"form-attendee":Jt},props:{csrf:{type:String,required:!0},event:{type:String,required:!0},site:{type:String,required:!0}},setup(){const e=we(),{showForm:t,attendeeSuccess:n}=ye(e),o=b(!1),l=()=>{e.setShowFrom(!1)},a=r=>{o.value=r};return He(()=>{n.value&&(l(),o.value=="true"&&Qn(()=>{e.setShowFrom(!0)}))}),{showForm:t,setAnotherSave:a,hideForm:l}}}),xi={class:"max-h-screen overflow-auto fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3/4 max-w-4xl"},Ci={class:"bg-white px-6 pb-6 rounded-xl mb-10"},Ei={class:"relative"},Ti=s("h3",{class:"text-lg pt-6"},"Add attendee",-1);function Di(e,t,n,o,l,a){const r=L("form-attendee");return p(),h("div",{class:M(["transition-all duration-500 delay-50 ease-in-out fixed left-0 top-0 w-screen h-screen",e.showForm?"z-[100] opacity-100 bg-gray-900 bg-opacity-50 poiner-events-all":"z-0 opacity-0 pointer-events-none"])},[s("div",xi,[s("div",Ci,[s("div",Ei,[Ti,e.showForm?(p(),vt(r,{key:0,csrf:e.csrf,event:e.event,site:e.site,onHideForm:e.hideForm,onSaveAnother:e.setAnotherSave},null,8,["csrf","event","site","onHideForm","onSaveAnother"])):w("",!0)])])])],2)}var Ai=Z(Si,[["render",Di]]);const Ii=U({props:{csrf:{type:String,required:!0},event:{type:String,required:!0}}}),Oi={id:"retour-import-form",method:"post","accept-charset":"UTF-8",enctype:"multipart/form-data"},Ni=["value"],Fi=s("input",{type:"hidden",name:"action",value:"craft-attendees/csv/import"},null,-1),Pi=["value"],Mi=s("input",{type:"file",class:"fixed top-full",name:"file",id:"attendee-csv-file",accept:".csv",onchange:"this.form.submit();"},null,-1),Ri=s("label",{for:"attendee-csv-file",class:"bg-gray-300 text-gray-800 font-bold py-2 px-3 text-sm rounded-lg cursor-pointer inline-block"},"Import CSV File",-1);function qi(e,t,n,o,l,a){return p(),h("form",Oi,[s("input",{type:"hidden",name:"CRAFT_CSRF_TOKEN",value:e.csrf},null,8,Ni),Fi,s("input",{type:"hidden",name:"event",value:e.event},null,8,Pi),Mi,Ri])}var Vi=Z(Ii,[["render",qi]]);const Li=U({components:{"button-add":so,"form-import":Vi,"popup-add-attendee":Ai,"list-attendees":Br,"list-logs":mi,"list-support":ki},props:{csrf:{type:String,required:!0},event:{type:String,required:!0},site:{type:String,required:!0},csv:{type:String,required:!0},active:{type:String,default:"attendee"}},setup(e){const t=b(e.active.length>0?e.active:"attendee");return{activePane:t,handleTabNavigation:o=>{t.value=o}}}}),Bi={class:"mt-10 w-full relative z-10"},Hi={role:"menubar",class:"flex"},ji=s("span",{class:"inline-flex w-4"},null,-1),zi=s("span",{class:"inline-flex w-4"},null,-1),Ui={key:0,class:"bg-gray-100 p-6 pt-10 -mt-2.5 -ml-6 relative"},Yi={class:"w-full flex mb-10"},Xi={class:"heading flex-grow"},Gi=s("label",{class:"text-xl font-bold inline-block w-full mb-2"},"Attendees",-1),Wi=F("Use the action buttons to either bulk upload from a CSV file or manually manage attendee data."),Ki=s("br",null,null,-1),Ji=["href"],Qi=F(" to make the field mapping easier."),Zi=s("div",{class:"block bg-gray-100 w-6 left-full pb-6 top-0 h-full absolute"},null,-1),ed=s("div",{class:"block bg-gray-100 h-6 top-full left-0 w-full absolute"},null,-1),td={key:1,class:"bg-gray-100 p-6 pt-10 -mt-2.5 -ml-6 relative"},nd=s("div",{class:"w-full flex mb-10"},[s("div",{class:"heading flex-grow"},[s("label",{class:"text-xl font-bold inline-block w-full mb-2"},"Follow on support"),s("span",null,"Indicate the relevant follow on support offered to attendees of the event.")])],-1),od=s("div",{class:"block bg-gray-100 w-6 left-full pb-6 top-0 h-full absolute"},null,-1),sd=s("div",{class:"block bg-gray-100 h-6 top-full left-0 w-full absolute"},null,-1),ld={key:2,class:"bg-gray-100 p-6 pt-10 -mt-2.5 -ml-6 relative"},ad=s("div",{class:"w-full flex mb-10"},[s("div",{class:"heading flex-grow"},[s("label",{class:"text-xl font-bold inline-block w-full mb-2"},"Import logs"),s("span",null,"All the logs for this event that occurred after importing a CSV will be shown bellow. They will be saved for one week.")])],-1),rd=s("div",{class:"block bg-gray-100 w-6 left-full pb-6 top-0 h-full absolute"},null,-1),id=s("div",{class:"block bg-gray-100 h-6 top-full left-0 w-full absolute"},null,-1);function dd(e,t,n,o,l,a){const r=L("form-import"),d=L("button-add"),i=L("popup-add-attendee"),u=L("list-attendees"),c=L("list-support"),f=L("list-logs");return p(),h(K,null,[s("nav",Bi,[s("ul",Hi,[s("li",{role:"menuitem",onClick:t[0]||(t[0]=v=>e.handleTabNavigation("attendee")),class:M(["font-bold text-base text-gray-600 border-b-2 border-solid hover:border-blue-600 pb-2 cursor-pointer",e.activePane==="attendee"?"border-blue-600":"border-gray-100"])}," Attendees ",2),ji,s("li",{role:"menuitem",onClick:t[1]||(t[1]=v=>e.handleTabNavigation("support")),class:M(["font-bold text-base text-gray-600 border-b-2 border-solid hover:border-blue-600 pb-2 cursor-pointer",e.activePane==="support"?"border-blue-600":"border-gray-100"])}," Follow on support ",2),zi,s("li",{role:"menuitem",onClick:t[2]||(t[2]=v=>e.handleTabNavigation("logs")),class:M(["font-bold text-base text-gray-600 border-b-2 border-solid hover:border-blue-600 pb-2 cursor-pointer",e.activePane==="logs"?"border-blue-600":"border-gray-100"])}," Import logs ",2)])]),e.activePane==="attendee"?(p(),h("section",Ui,[s("div",Yi,[s("div",Xi,[Gi,s("span",null,[Wi,Ki,s("a",{href:e.csv,target:"_blank",download:"",class:"text-blue-600 cursor-pointer inline-block"},"Download CSV template",8,Ji),Qi])]),B(r,{csrf:e.csrf,event:e.event,site:e.site},null,8,["csrf","event","site"]),B(d,{label:"Add"})]),B(i,{csrf:e.csrf,event:e.event,site:e.site},null,8,["csrf","event","site"]),B(u,{csrf:e.csrf,event:e.event,site:e.site},null,8,["csrf","event","site"]),Zi,ed])):w("",!0),e.activePane==="support"?(p(),h("section",td,[nd,B(c,{csrf:e.csrf,event:e.event},null,8,["csrf","event"]),od,sd])):w("",!0),e.activePane==="logs"?(p(),h("section",ld,[ad,B(f,{event:e.event},null,8,["event"]),rd,id])):w("",!0)],64)}var ud=Z(Li,[["render",dd]]);/*!
  * vue-draggable-next v2.1.0
  * (c) 2021 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dn(Object(n),!0).forEach(function(o){cd(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function bt(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bt=function(t){return typeof t}:bt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(e)}function cd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(){return De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},De.apply(this,arguments)}function pd(e,t){if(e==null)return{};var n={},o=Object.keys(e),l,a;for(a=0;a<o.length;a++)l=o[a],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function hd(e,t){if(e==null)return{};var n=pd(e,t),o,l;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)o=a[l],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(n[o]=e[o]))}return n}var fd="1.14.0";function Te(e){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(e)}var Ae=Te(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ct=Te(/Edge/i),un=Te(/firefox/i),at=Te(/safari/i)&&!Te(/chrome/i)&&!Te(/android/i),Nn=Te(/iP(ad|od|hone)/i),gd=Te(/chrome/i)&&Te(/android/i),Fn={capture:!1,passive:!1};function N(e,t,n){e.addEventListener(t,n,!Ae&&Fn)}function I(e,t,n){e.removeEventListener(t,n,!Ae&&Fn)}function St(e,t){if(!!t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function md(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function xe(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&St(e,t):St(e,t))||o&&e===n)return e;if(e===n)break}while(e=md(e))}return null}var cn=/\s+/g;function ge(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(cn," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(cn," ")}}function S(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function Ze(e,t){var n="";if(typeof e=="string")n=e;else do{var o=S(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(n)}function Pn(e,t,n){if(e){var o=e.getElementsByTagName(t),l=0,a=o.length;if(n)for(;l<a;l++)n(o[l],l);return o}return[]}function Ce(){var e=document.scrollingElement;return e||document.documentElement}function se(e,t,n,o,l){if(!(!e.getBoundingClientRect&&e!==window)){var a,r,d,i,u,c,f;if(e!==window&&e.parentNode&&e!==Ce()?(a=e.getBoundingClientRect(),r=a.top,d=a.left,i=a.bottom,u=a.right,c=a.height,f=a.width):(r=0,d=0,i=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(l=l||e.parentNode,!Ae))do if(l&&l.getBoundingClientRect&&(S(l,"transform")!=="none"||n&&S(l,"position")!=="static")){var v=l.getBoundingClientRect();r-=v.top+parseInt(S(l,"border-top-width")),d-=v.left+parseInt(S(l,"border-left-width")),i=r+a.height,u=d+a.width;break}while(l=l.parentNode);if(o&&e!==window){var g=Ze(l||e),y=g&&g.a,_=g&&g.d;g&&(r/=_,d/=y,f/=y,c/=_,i=r+c,u=d+f)}return{top:r,left:d,bottom:i,right:u,width:f,height:c}}}function pn(e,t,n){for(var o=Be(e,!0),l=se(e)[t];o;){var a=se(o)[n],r=void 0;if(n==="top"||n==="left"?r=l>=a:r=l<=a,!r)return o;if(o===Ce())break;o=Be(o,!1)}return!1}function et(e,t,n,o){for(var l=0,a=0,r=e.children;a<r.length;){if(r[a].style.display!=="none"&&r[a]!==x.ghost&&(o||r[a]!==x.dragged)&&xe(r[a],n.draggable,e,!1)){if(l===t)return r[a];l++}a++}return null}function Zt(e,t){for(var n=e.lastElementChild;n&&(n===x.ghost||S(n,"display")==="none"||t&&!St(n,t));)n=n.previousElementSibling;return n||null}function _e(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==x.clone&&(!t||St(e,t))&&n++;return n}function hn(e){var t=0,n=0,o=Ce();if(e)do{var l=Ze(e),a=l.a,r=l.d;t+=e.scrollLeft*a,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function vd(e,t){for(var n in e)if(!!e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function Be(e,t){if(!e||!e.getBoundingClientRect)return Ce();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var l=S(n);if(n.clientWidth<n.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ce();if(o||t)return n;o=!0}}while(n=n.parentNode);return Ce()}function bd(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Nt(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var rt;function Mn(e,t){return function(){if(!rt){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),rt=setTimeout(function(){rt=void 0},t)}}}function yd(){clearTimeout(rt),rt=void 0}function Rn(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function qn(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var ve="Sortable"+new Date().getTime();function _d(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(l){if(!(S(l,"display")==="none"||l===x.ghost)){e.push({target:l,rect:se(l)});var a=Ee({},e[e.length-1].rect);if(l.thisAnimationDuration){var r=Ze(l,!0);r&&(a.top-=r.f,a.left-=r.e)}l.fromRect=a}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(vd(e,{target:o}),1)},animateAll:function(o){var l=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var a=!1,r=0;e.forEach(function(d){var i=0,u=d.target,c=u.fromRect,f=se(u),v=u.prevFromRect,g=u.prevToRect,y=d.rect,_=Ze(u,!0);_&&(f.top-=_.f,f.left-=_.e),u.toRect=f,u.thisAnimationDuration&&Nt(v,f)&&!Nt(c,f)&&(y.top-f.top)/(y.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(i=$d(y,v,g,l.options)),Nt(f,c)||(u.prevFromRect=c,u.prevToRect=f,i||(i=l.options.animation),l.animate(u,y,f,i)),i&&(a=!0,r=Math.max(r,i),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},i),u.thisAnimationDuration=i)}),clearTimeout(t),a?t=setTimeout(function(){typeof o=="function"&&o()},r):typeof o=="function"&&o(),e=[]},animate:function(o,l,a,r){if(r){S(o,"transition",""),S(o,"transform","");var d=Ze(this.el),i=d&&d.a,u=d&&d.d,c=(l.left-a.left)/(i||1),f=(l.top-a.top)/(u||1);o.animatingX=!!c,o.animatingY=!!f,S(o,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=wd(o),S(o,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),S(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){S(o,"transition",""),S(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},r)}}}}function wd(e){return e.offsetWidth}function $d(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var We=[],Ft={initializeByDefault:!0},pt={mount:function(t){for(var n in Ft)Ft.hasOwnProperty(n)&&!(n in t)&&(t[n]=Ft[n]);We.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),We.push(t)},pluginEvent:function(t,n,o){var l=this;this.eventCanceled=!1,o.cancel=function(){l.eventCanceled=!0};var a=t+"Global";We.forEach(function(r){!n[r.pluginName]||(n[r.pluginName][a]&&n[r.pluginName][a](Ee({sortable:n},o)),n.options[r.pluginName]&&n[r.pluginName][t]&&n[r.pluginName][t](Ee({sortable:n},o)))})},initializePlugins:function(t,n,o,l){We.forEach(function(d){var i=d.pluginName;if(!(!t.options[i]&&!d.initializeByDefault)){var u=new d(t,n,t.options);u.sortable=t,u.options=t.options,t[i]=u,De(o,u.defaults)}});for(var a in t.options)if(!!t.options.hasOwnProperty(a)){var r=this.modifyOption(t,a,t.options[a]);typeof r!="undefined"&&(t.options[a]=r)}},getEventProperties:function(t,n){var o={};return We.forEach(function(l){typeof l.eventProperties=="function"&&De(o,l.eventProperties.call(n[l.pluginName],t))}),o},modifyOption:function(t,n,o){var l;return We.forEach(function(a){!t[a.pluginName]||a.optionListeners&&typeof a.optionListeners[n]=="function"&&(l=a.optionListeners[n].call(t[a.pluginName],o))}),l}};function kd(e){var t=e.sortable,n=e.rootEl,o=e.name,l=e.targetEl,a=e.cloneEl,r=e.toEl,d=e.fromEl,i=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,v=e.originalEvent,g=e.putSortable,y=e.extraEventProperties;if(t=t||n&&n[ve],!!t){var _,T=t.options,D="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Ae&&!ct?_=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent(o,!0,!0)),_.to=r||n,_.from=d||n,_.item=l||n,_.clone=a,_.oldIndex=i,_.newIndex=u,_.oldDraggableIndex=c,_.newDraggableIndex=f,_.originalEvent=v,_.pullMode=g?g.lastPutMode:void 0;var E=Ee(Ee({},y),pt.getEventProperties(o,t));for(var A in E)_[A]=E[A];n&&n.dispatchEvent(_),T[D]&&T[D].call(t,_)}}var Sd=["evt"],he=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=o.evt,a=hd(o,Sd);pt.pluginEvent.bind(x)(t,n,Ee({dragEl:m,parentEl:J,ghostEl:C,rootEl:z,nextEl:Ye,lastDownEl:yt,cloneEl:Q,cloneHidden:Le,dragStarted:ot,putSortable:re,activeSortable:x.active,originalEvent:l,oldIndex:Qe,oldDraggableIndex:it,newIndex:me,newDraggableIndex:Ve,hideGhostForTarget:Hn,unhideGhostForTarget:jn,cloneNowHidden:function(){Le=!0},cloneNowShown:function(){Le=!1},dispatchSortableEvent:function(d){ue({sortable:n,name:d,originalEvent:l})}},a))};function ue(e){kd(Ee({putSortable:re,cloneEl:Q,targetEl:m,rootEl:z,oldIndex:Qe,oldDraggableIndex:it,newIndex:me,newDraggableIndex:Ve},e))}var m,J,C,z,Ye,yt,Q,Le,Qe,me,it,Ve,ht,re,Je=!1,xt=!1,Ct=[],ze,ke,Pt,Mt,fn,gn,ot,Ke,dt,ut=!1,ft=!1,_t,de,Rt=[],zt=!1,Et=[],At=typeof document!="undefined",gt=Nn,mn=ct||Ae?"cssFloat":"float",xd=At&&!gd&&!Nn&&"draggable"in document.createElement("div"),Vn=function(){if(!!At){if(Ae)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ln=function(t,n){var o=S(t),l=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=et(t,0,n),r=et(t,1,n),d=a&&S(a),i=r&&S(r),u=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+se(a).width,c=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+se(r).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&d.float&&d.float!=="none"){var f=d.float==="left"?"left":"right";return r&&(i.clear==="both"||i.clear===f)?"vertical":"horizontal"}return a&&(d.display==="block"||d.display==="flex"||d.display==="table"||d.display==="grid"||u>=l&&o[mn]==="none"||r&&o[mn]==="none"&&u+c>l)?"vertical":"horizontal"},Cd=function(t,n,o){var l=o?t.left:t.top,a=o?t.right:t.bottom,r=o?t.width:t.height,d=o?n.left:n.top,i=o?n.right:n.bottom,u=o?n.width:n.height;return l===d||a===i||l+r/2===d+u/2},Ed=function(t,n){var o;return Ct.some(function(l){var a=l[ve].options.emptyInsertThreshold;if(!(!a||Zt(l))){var r=se(l),d=t>=r.left-a&&t<=r.right+a,i=n>=r.top-a&&n<=r.bottom+a;if(d&&i)return o=l}}),o},Bn=function(t){function n(a,r){return function(d,i,u,c){var f=d.options.group.name&&i.options.group.name&&d.options.group.name===i.options.group.name;if(a==null&&(r||f))return!0;if(a==null||a===!1)return!1;if(r&&a==="clone")return a;if(typeof a=="function")return n(a(d,i,u,c),r)(d,i,u,c);var v=(r?d:i).options.group.name;return a===!0||typeof a=="string"&&a===v||a.join&&a.indexOf(v)>-1}}var o={},l=t.group;(!l||bt(l)!="object")&&(l={name:l}),o.name=l.name,o.checkPull=n(l.pull,!0),o.checkPut=n(l.put),o.revertClone=l.revertClone,t.group=o},Hn=function(){!Vn&&C&&S(C,"display","none")},jn=function(){!Vn&&C&&S(C,"display","")};At&&document.addEventListener("click",function(e){if(xt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),xt=!1,!1},!0);var Ue=function(t){if(m){t=t.touches?t.touches[0]:t;var n=Ed(t.clientX,t.clientY);if(n){var o={};for(var l in t)t.hasOwnProperty(l)&&(o[l]=t[l]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[ve]._onDragOver(o)}}},Td=function(t){m&&m.parentNode[ve]._isOutsideThisEl(t.target)};function x(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=De({},t),e[ve]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ln(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,d){r.setData("Text",d.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:x.supportPointer!==!1&&"PointerEvent"in window&&!at,emptyInsertThreshold:5};pt.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);Bn(t);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=t.forceFallback?!1:xd,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?N(e,"pointerdown",this._onTapStart):(N(e,"mousedown",this._onTapStart),N(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(N(e,"dragover",this),N(e,"dragenter",this)),Ct.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),De(this,_d())}x.prototype={constructor:x,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ke=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,m):this.options.direction},_onTapStart:function(t){if(!!t.cancelable){var n=this,o=this.el,l=this.options,a=l.preventOnFilter,r=t.type,d=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,i=(d||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||i,c=l.filter;if(Md(o),!m&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||l.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&at&&i&&i.tagName.toUpperCase()==="SELECT")&&(i=xe(i,l.draggable,o,!1),!(i&&i.animated)&&yt!==i)){if(Qe=_e(i),it=_e(i,l.draggable),typeof c=="function"){if(c.call(this,t,i,this)){ue({sortable:n,rootEl:u,name:"filter",targetEl:i,toEl:o,fromEl:o}),he("filter",n,{evt:t}),a&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=xe(u,f.trim(),o,!1),f)return ue({sortable:n,rootEl:f,name:"filter",targetEl:i,fromEl:o,toEl:o}),he("filter",n,{evt:t}),!0}),c)){a&&t.cancelable&&t.preventDefault();return}l.handle&&!xe(u,l.handle,o,!1)||this._prepareDragStart(t,d,i)}}},_prepareDragStart:function(t,n,o){var l=this,a=l.el,r=l.options,d=a.ownerDocument,i;if(o&&!m&&o.parentNode===a){var u=se(o);if(z=a,m=o,J=m.parentNode,Ye=m.nextSibling,yt=o,ht=r.group,x.dragged=m,ze={target:m,clientX:(n||t).clientX,clientY:(n||t).clientY},fn=ze.clientX-u.left,gn=ze.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,m.style["will-change"]="all",i=function(){if(he("delayEnded",l,{evt:t}),x.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!un&&l.nativeDraggable&&(m.draggable=!0),l._triggerDragStart(t,n),ue({sortable:l,name:"choose",originalEvent:t}),ge(m,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){Pn(m,c.trim(),qt)}),N(d,"dragover",Ue),N(d,"mousemove",Ue),N(d,"touchmove",Ue),N(d,"mouseup",l._onDrop),N(d,"touchend",l._onDrop),N(d,"touchcancel",l._onDrop),un&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),he("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ct||Ae))){if(x.eventCanceled){this._onDrop();return}N(d,"mouseup",l._disableDelayedDrag),N(d,"touchend",l._disableDelayedDrag),N(d,"touchcancel",l._disableDelayedDrag),N(d,"mousemove",l._delayedDragTouchMoveHandler),N(d,"touchmove",l._delayedDragTouchMoveHandler),r.supportPointer&&N(d,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(i,r.delay)}else i()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&qt(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;I(t,"mouseup",this._disableDelayedDrag),I(t,"touchend",this._disableDelayedDrag),I(t,"touchcancel",this._disableDelayedDrag),I(t,"mousemove",this._delayedDragTouchMoveHandler),I(t,"touchmove",this._delayedDragTouchMoveHandler),I(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?N(document,"pointermove",this._onTouchMove):n?N(document,"touchmove",this._onTouchMove):N(document,"mousemove",this._onTouchMove):(N(m,"dragend",this),N(z,"dragstart",this._onDragStart));try{document.selection?wt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Je=!1,z&&m){he("dragStarted",this,{evt:n}),this.nativeDraggable&&N(document,"dragover",Td);var o=this.options;!t&&ge(m,o.dragClass,!1),ge(m,o.ghostClass,!0),x.active=this,t&&this._appendGhost(),ue({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ke){this._lastX=ke.clientX,this._lastY=ke.clientY,Hn();for(var t=document.elementFromPoint(ke.clientX,ke.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ke.clientX,ke.clientY),t!==n);)n=t;if(m.parentNode[ve]._isOutsideThisEl(t),n)do{if(n[ve]){var o=void 0;if(o=n[ve]._onDragOver({clientX:ke.clientX,clientY:ke.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);jn()}},_onTouchMove:function(t){if(ze){var n=this.options,o=n.fallbackTolerance,l=n.fallbackOffset,a=t.touches?t.touches[0]:t,r=C&&Ze(C,!0),d=C&&r&&r.a,i=C&&r&&r.d,u=gt&&de&&hn(de),c=(a.clientX-ze.clientX+l.x)/(d||1)+(u?u[0]-Rt[0]:0)/(d||1),f=(a.clientY-ze.clientY+l.y)/(i||1)+(u?u[1]-Rt[1]:0)/(i||1);if(!x.active&&!Je){if(o&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(C){r?(r.e+=c-(Pt||0),r.f+=f-(Mt||0)):r={a:1,b:0,c:0,d:1,e:c,f};var v="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");S(C,"webkitTransform",v),S(C,"mozTransform",v),S(C,"msTransform",v),S(C,"transform",v),Pt=c,Mt=f,ke=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!C){var t=this.options.fallbackOnBody?document.body:z,n=se(m,!0,gt,!0,t),o=this.options;if(gt){for(de=t;S(de,"position")==="static"&&S(de,"transform")==="none"&&de!==document;)de=de.parentNode;de!==document.body&&de!==document.documentElement?(de===document&&(de=Ce()),n.top+=de.scrollTop,n.left+=de.scrollLeft):de=Ce(),Rt=hn(de)}C=m.cloneNode(!0),ge(C,o.ghostClass,!1),ge(C,o.fallbackClass,!0),ge(C,o.dragClass,!0),S(C,"transition",""),S(C,"transform",""),S(C,"box-sizing","border-box"),S(C,"margin",0),S(C,"top",n.top),S(C,"left",n.left),S(C,"width",n.width),S(C,"height",n.height),S(C,"opacity","0.8"),S(C,"position",gt?"absolute":"fixed"),S(C,"zIndex","100000"),S(C,"pointerEvents","none"),x.ghost=C,t.appendChild(C),S(C,"transform-origin",fn/parseInt(C.style.width)*100+"% "+gn/parseInt(C.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,l=t.dataTransfer,a=o.options;if(he("dragStart",this,{evt:t}),x.eventCanceled){this._onDrop();return}he("setupClone",this),x.eventCanceled||(Q=qn(m),Q.draggable=!1,Q.style["will-change"]="",this._hideClone(),ge(Q,this.options.chosenClass,!1),x.clone=Q),o.cloneId=wt(function(){he("clone",o),!x.eventCanceled&&(o.options.removeCloneOnHide||z.insertBefore(Q,m),o._hideClone(),ue({sortable:o,name:"clone"}))}),!n&&ge(m,a.dragClass,!0),n?(xt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(I(document,"mouseup",o._onDrop),I(document,"touchend",o._onDrop),I(document,"touchcancel",o._onDrop),l&&(l.effectAllowed="move",a.setData&&a.setData.call(o,l,m)),N(document,"drop",o),S(m,"transform","translateZ(0)")),Je=!0,o._dragStartId=wt(o._dragStarted.bind(o,n,t)),N(document,"selectstart",o),ot=!0,at&&S(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,l,a,r,d=this.options,i=d.group,u=x.active,c=ht===i,f=d.sort,v=re||u,g,y=this,_=!1;if(zt)return;function T(ae,fe){he(ae,y,Ee({evt:t,isOwner:c,axis:g?"vertical":"horizontal",revert:r,dragRect:l,targetRect:a,canSort:f,fromSortable:v,target:o,completed:E,onMove:function($e,Se){return mt(z,n,m,l,$e,se($e),t,Se)},changed:A},fe))}function D(){T("dragOverAnimationCapture"),y.captureAnimationState(),y!==v&&v.captureAnimationState()}function E(ae){return T("dragOverCompleted",{insertion:ae}),ae&&(c?u._hideClone():u._showClone(y),y!==v&&(ge(m,re?re.options.ghostClass:u.options.ghostClass,!1),ge(m,d.ghostClass,!0)),re!==y&&y!==x.active?re=y:y===x.active&&re&&(re=null),v===y&&(y._ignoreWhileAnimating=o),y.animateAll(function(){T("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(o===m&&!m.animated||o===n&&!o.animated)&&(Ke=null),!d.dragoverBubble&&!t.rootEl&&o!==document&&(m.parentNode[ve]._isOutsideThisEl(t.target),!ae&&Ue(t)),!d.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),_=!0}function A(){me=_e(m),Ve=_e(m,d.draggable),ue({sortable:y,name:"change",toEl:n,newIndex:me,newDraggableIndex:Ve,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=xe(o,d.draggable,n,!0),T("dragOver"),x.eventCanceled)return _;if(m.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||y._ignoreWhileAnimating===o)return E(!1);if(xt=!1,u&&!d.disabled&&(c?f||(r=J!==z):re===this||(this.lastPutMode=ht.checkPull(this,u,m,t))&&i.checkPut(this,u,m,t))){if(g=this._getDirection(t,o)==="vertical",l=se(m),T("dragOverValid"),x.eventCanceled)return _;if(r)return J=z,D(),this._hideClone(),T("revert"),x.eventCanceled||(Ye?z.insertBefore(m,Ye):z.appendChild(m)),E(!0);var O=Zt(n,d.draggable);if(!O||Od(t,g,this)&&!O.animated){if(O===m)return E(!1);if(O&&n===t.target&&(o=O),o&&(a=se(o)),mt(z,n,m,l,o,a,t,!!o)!==!1)return D(),n.appendChild(m),J=n,A(),E(!0)}else if(O&&Id(t,g,this)){var $=et(n,0,d,!0);if($===m)return E(!1);if(o=$,a=se(o),mt(z,n,m,l,o,a,t,!1)!==!1)return D(),n.insertBefore(m,$),J=n,A(),E(!0)}else if(o.parentNode===n){a=se(o);var q=0,Y,ee=m.parentNode!==n,P=!Cd(m.animated&&m.toRect||l,o.animated&&o.toRect||a,g),X=g?"top":"left",V=pn(o,"top","top")||pn(m,"top","top"),G=V?V.scrollTop:void 0;Ke!==o&&(Y=a[X],ut=!1,ft=!P&&d.invertSwap||ee),q=Nd(t,o,a,g,P?1:d.swapThreshold,d.invertedSwapThreshold==null?d.swapThreshold:d.invertedSwapThreshold,ft,Ke===o);var R;if(q!==0){var W=_e(m);do W-=q,R=J.children[W];while(R&&(S(R,"display")==="none"||R===C))}if(q===0||R===o)return E(!1);Ke=o,dt=q;var le=o.nextElementSibling,H=!1;H=q===1;var ie=mt(z,n,m,l,o,a,t,H);if(ie!==!1)return(ie===1||ie===-1)&&(H=ie===1),zt=!0,setTimeout(Ad,30),D(),H&&!le?n.appendChild(m):o.parentNode.insertBefore(m,H?le:o),V&&Rn(V,0,G-V.scrollTop),J=m.parentNode,Y!==void 0&&!ft&&(_t=Math.abs(Y-se(o)[X])),A(),E(!0)}if(n.contains(m))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){I(document,"mousemove",this._onTouchMove),I(document,"touchmove",this._onTouchMove),I(document,"pointermove",this._onTouchMove),I(document,"dragover",Ue),I(document,"mousemove",Ue),I(document,"touchmove",Ue)},_offUpEvents:function(){var t=this.el.ownerDocument;I(t,"mouseup",this._onDrop),I(t,"touchend",this._onDrop),I(t,"pointerup",this._onDrop),I(t,"touchcancel",this._onDrop),I(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(me=_e(m),Ve=_e(m,o.draggable),he("drop",this,{evt:t}),J=m&&m.parentNode,me=_e(m),Ve=_e(m,o.draggable),x.eventCanceled){this._nulling();return}Je=!1,ft=!1,ut=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ut(this.cloneId),Ut(this._dragStartId),this.nativeDraggable&&(I(document,"drop",this),I(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),at&&S(document.body,"user-select",""),S(m,"transform",""),t&&(ot&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),C&&C.parentNode&&C.parentNode.removeChild(C),(z===J||re&&re.lastPutMode!=="clone")&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),m&&(this.nativeDraggable&&I(m,"dragend",this),qt(m),m.style["will-change"]="",ot&&!Je&&ge(m,re?re.options.ghostClass:this.options.ghostClass,!1),ge(m,this.options.chosenClass,!1),ue({sortable:this,name:"unchoose",toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:t}),z!==J?(me>=0&&(ue({rootEl:J,name:"add",toEl:J,fromEl:z,originalEvent:t}),ue({sortable:this,name:"remove",toEl:J,originalEvent:t}),ue({rootEl:J,name:"sort",toEl:J,fromEl:z,originalEvent:t}),ue({sortable:this,name:"sort",toEl:J,originalEvent:t})),re&&re.save()):me!==Qe&&me>=0&&(ue({sortable:this,name:"update",toEl:J,originalEvent:t}),ue({sortable:this,name:"sort",toEl:J,originalEvent:t})),x.active&&((me==null||me===-1)&&(me=Qe,Ve=it),ue({sortable:this,name:"end",toEl:J,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){he("nulling",this),z=m=J=C=Ye=Q=yt=Le=ze=ke=ot=me=Ve=Qe=it=Ke=dt=re=ht=x.dragged=x.ghost=x.clone=x.active=null,Et.forEach(function(t){t.checked=!0}),Et.length=Pt=Mt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":m&&(this._onDragOver(t),Dd(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,l=0,a=o.length,r=this.options;l<a;l++)n=o[l],xe(n,r.draggable,this.el,!1)&&t.push(n.getAttribute(r.dataIdAttr)||Pd(n));return t},sort:function(t,n){var o={},l=this.el;this.toArray().forEach(function(a,r){var d=l.children[r];xe(d,this.options.draggable,l,!1)&&(o[a]=d)},this),n&&this.captureAnimationState(),t.forEach(function(a){o[a]&&(l.removeChild(o[a]),l.appendChild(o[a]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return xe(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var l=pt.modifyOption(this,t,n);typeof l!="undefined"?o[t]=l:o[t]=n,t==="group"&&Bn(o)},destroy:function(){he("destroy",this);var t=this.el;t[ve]=null,I(t,"mousedown",this._onTapStart),I(t,"touchstart",this._onTapStart),I(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(I(t,"dragover",this),I(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ct.splice(Ct.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Le){if(he("hideClone",this),x.eventCanceled)return;S(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),Le=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Le){if(he("showClone",this),x.eventCanceled)return;m.parentNode==z&&!this.options.group.revertClone?z.insertBefore(Q,m):Ye?z.insertBefore(Q,Ye):z.appendChild(Q),this.options.group.revertClone&&this.animate(m,Q),S(Q,"display",""),Le=!1}}};function Dd(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function mt(e,t,n,o,l,a,r,d){var i,u=e[ve],c=u.options.onMove,f;return window.CustomEvent&&!Ae&&!ct?i=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(i=document.createEvent("Event"),i.initEvent("move",!0,!0)),i.to=t,i.from=e,i.dragged=n,i.draggedRect=o,i.related=l||t,i.relatedRect=a||se(t),i.willInsertAfter=d,i.originalEvent=r,e.dispatchEvent(i),c&&(f=c.call(u,i,r)),f}function qt(e){e.draggable=!1}function Ad(){zt=!1}function Id(e,t,n){var o=se(et(n.el,0,n.options,!0)),l=10;return t?e.clientX<o.left-l||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-l||e.clientY<o.bottom&&e.clientX<o.left}function Od(e,t,n){var o=se(Zt(n.el,n.options.draggable)),l=10;return t?e.clientX>o.right+l||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+l}function Nd(e,t,n,o,l,a,r,d){var i=o?e.clientY:e.clientX,u=o?n.height:n.width,c=o?n.top:n.left,f=o?n.bottom:n.right,v=!1;if(!r){if(d&&_t<u*l){if(!ut&&(dt===1?i>c+u*a/2:i<f-u*a/2)&&(ut=!0),ut)v=!0;else if(dt===1?i<c+_t:i>f-_t)return-dt}else if(i>c+u*(1-l)/2&&i<f-u*(1-l)/2)return Fd(t)}return v=v||r,v&&(i<c+u*a/2||i>f-u*a/2)?i>c+u/2?1:-1:0}function Fd(e){return _e(m)<_e(e)?1:-1}function Pd(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Md(e){Et.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Et.push(o)}}function wt(e){return setTimeout(e,0)}function Ut(e){return clearTimeout(e)}At&&N(document,"touchmove",function(e){(x.active||Je)&&e.cancelable&&e.preventDefault()});x.utils={on:N,off:I,css:S,find:Pn,is:function(t,n){return!!xe(t,n,t,!1)},extend:bd,throttle:Mn,closest:xe,toggleClass:ge,clone:qn,index:_e,nextTick:wt,cancelNextTick:Ut,detectDirection:Ln,getChild:et};x.get=function(e){return e[ve]};x.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(x.utils=Ee(Ee({},x.utils),o.utils)),pt.mount(o)})};x.create=function(e,t){return new x(e,t)};x.version=fd;var te=[],st,Yt,Xt=!1,Vt,Lt,Tt,lt;function Rd(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?N(document,"dragover",this._handleAutoScroll):this.options.supportPointer?N(document,"pointermove",this._handleFallbackAutoScroll):o.touches?N(document,"touchmove",this._handleFallbackAutoScroll):N(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):(I(document,"pointermove",this._handleFallbackAutoScroll),I(document,"touchmove",this._handleFallbackAutoScroll),I(document,"mousemove",this._handleFallbackAutoScroll)),vn(),$t(),yd()},nulling:function(){Tt=Yt=st=Xt=lt=Vt=Lt=null,te.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var l=this,a=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,d=document.elementFromPoint(a,r);if(Tt=n,o||this.options.forceAutoScrollFallback||ct||Ae||at){Bt(n,this.options,d,o);var i=Be(d,!0);Xt&&(!lt||a!==Vt||r!==Lt)&&(lt&&vn(),lt=setInterval(function(){var u=Be(document.elementFromPoint(a,r),!0);u!==i&&(i=u,$t()),Bt(n,l.options,u,o)},10),Vt=a,Lt=r)}else{if(!this.options.bubbleScroll||Be(d,!0)===Ce()){$t();return}Bt(n,this.options,Be(d,!1),!1)}}},De(e,{pluginName:"scroll",initializeByDefault:!0})}function $t(){te.forEach(function(e){clearInterval(e.pid)}),te=[]}function vn(){clearInterval(lt)}var Bt=Mn(function(e,t,n,o){if(!!t.scroll){var l=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,d=t.scrollSpeed,i=Ce(),u=!1,c;Yt!==n&&(Yt=n,$t(),st=t.scroll,c=t.scrollFn,st===!0&&(st=Be(n,!0)));var f=0,v=st;do{var g=v,y=se(g),_=y.top,T=y.bottom,D=y.left,E=y.right,A=y.width,O=y.height,$=void 0,q=void 0,Y=g.scrollWidth,ee=g.scrollHeight,P=S(g),X=g.scrollLeft,V=g.scrollTop;g===i?($=A<Y&&(P.overflowX==="auto"||P.overflowX==="scroll"||P.overflowX==="visible"),q=O<ee&&(P.overflowY==="auto"||P.overflowY==="scroll"||P.overflowY==="visible")):($=A<Y&&(P.overflowX==="auto"||P.overflowX==="scroll"),q=O<ee&&(P.overflowY==="auto"||P.overflowY==="scroll"));var G=$&&(Math.abs(E-l)<=r&&X+A<Y)-(Math.abs(D-l)<=r&&!!X),R=q&&(Math.abs(T-a)<=r&&V+O<ee)-(Math.abs(_-a)<=r&&!!V);if(!te[f])for(var W=0;W<=f;W++)te[W]||(te[W]={});(te[f].vx!=G||te[f].vy!=R||te[f].el!==g)&&(te[f].el=g,te[f].vx=G,te[f].vy=R,clearInterval(te[f].pid),(G!=0||R!=0)&&(u=!0,te[f].pid=setInterval(function(){o&&this.layer===0&&x.active._onTouchMove(Tt);var le=te[this.layer].vy?te[this.layer].vy*d:0,H=te[this.layer].vx?te[this.layer].vx*d:0;typeof c=="function"&&c.call(x.dragged.parentNode[ve],H,le,e,Tt,te[this.layer].el)!=="continue"||Rn(te[this.layer].el,H,le)}.bind({layer:f}),24))),f++}while(t.bubbleScroll&&v!==i&&(v=Be(v,!1)));Xt=u}},30),zn=function(t){var n=t.originalEvent,o=t.putSortable,l=t.dragEl,a=t.activeSortable,r=t.dispatchSortableEvent,d=t.hideGhostForTarget,i=t.unhideGhostForTarget;if(!!n){var u=o||a;d();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);i(),u&&!u.el.contains(f)&&(r("spill"),this.onSpill({dragEl:l,putSortable:o}))}};function en(){}en.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var l=et(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(n,l):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:zn};De(en,{pluginName:"revertOnSpill"});function tn(){}tn.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,l=o||this.sortable;l.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),l.animateAll()},drop:zn};De(tn,{pluginName:"removeOnSpill"});x.mount(new Rd);x.mount(tn,en);function qd(){return typeof window!="undefined"?window.console:global.console}const Vd=qd();function Ld(e){const t=Object.create(null);return function(o){return t[o]||(t[o]=e(o))}}const Bd=/-(\w)/g,bn=Ld(e=>e.replace(Bd,(t,n)=>n?n.toUpperCase():""));function Ht(e){e.parentElement!==null&&e.parentElement.removeChild(e)}function yn(e,t,n){const o=n===0?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,o)}function Hd(e,t){return Object.values(e).indexOf(t)}function jd(e,t,n,o){if(!e)return[];const l=Object.values(e),a=t.length-o;return[...t].map((d,i)=>i>=a?l.length:l.indexOf(d))}function Un(e,t){this.$nextTick(()=>this.$emit(e.toLowerCase(),t))}function zd(e){return t=>{this.realList!==null&&this["onDrag"+e](t),Un.call(this,e,t)}}function Ud(e){return["transition-group","TransitionGroup"].includes(e)}function Yd(e){if(!e||e.length!==1)return!1;const[{type:t}]=e;return t?Ud(t.name):!1}function Xd(e,t){return t?nt(nt({},t.props),t.attrs):e}const Gt=["Start","Add","Remove","Update","End"],Wt=["Choose","Unchoose","Sort","Filter","Clone"],Gd=["Move",...Gt,...Wt].map(e=>"on"+e);let jt=null;const Wd={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},Kd=U({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Gt.map(e=>e.toLowerCase()),...Wt.map(e=>e.toLowerCase())],props:Wd,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const e=this.$slots.default?this.$slots.default():null,t=Xd(this.$attrs,this.componentData);return e?(this.transitionMode=Yd(e),an(this.getTag(),t,e)):an(this.getTag(),t,[])},created(){this.list!==null&&this.modelValue!==null&&Vd.error("list props are mutually exclusive! Please set one.")},mounted(){const e={};Gt.forEach(l=>{e["on"+l]=zd.call(this,l)}),Wt.forEach(l=>{e["on"+l]=Un.bind(this,l)});const t=Object.keys(this.$attrs).reduce((l,a)=>(l[bn(a)]=this.$attrs[a],l),{}),n=Object.assign({},t,e,{onMove:(l,a)=>this.onDragMove(l,a)});!("draggable"in n)&&(n.draggable=">*");const o=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new x(o,n),o.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?L(this.component):this.tag},updateOptions(e){for(var t in e){const n=bn(t);Gd.indexOf(n)===-1&&this._sortable.option(n,e[t])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=jd(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(e){const t=Hd(this.getChildrenNodes()||[],e);if(t===-1)return null;const n=this.realList[t];return{index:t,element:n}},emitChanges(e){this.$nextTick(()=>{this.$emit("change",e)})},alterList(e){if(this.list){e(this.list);return}const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){const e=t=>t.splice(...arguments);this.alterList(e)},updatePosition(e,t){const n=o=>o.splice(t,0,o.splice(e,1)[0]);this.alterList(n)},getVmIndex(e){const t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;var t=this.getChildrenNodes();t[e].data=null;const n=this.getComponent();n.children=[],n.kept=void 0},onDragStart(e){this.context=this.getUnderlyingVm(e.item),this.context&&(e.item._underlying_vm_=this.clone(this.context.element),jt=e.item)},onDragAdd(e){const t=e.item._underlying_vm_;if(t===void 0)return;Ht(e.item);const n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();const o={element:t,newIndex:n};this.emitChanges({added:o})},onDragRemove(e){if(yn(this.$el,e.item,e.oldIndex),e.pullMode==="clone"){Ht(e.clone);return}if(!this.context)return;const t=this.context.index;this.spliceList(t,1);const n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})},onDragUpdate(e){Ht(e.item),yn(e.from,e.item,e.oldIndex);const t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);const o={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:o})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},onDragMove(e,t){const n=this.move;if(!n||!this.realList)return!0;const o=this.getRelatedContextFromMoveEvent(e),l=this.context,a=this.computeFutureIndex(o,e);Object.assign(l,{futureIndex:a});const r=Object.assign({},e,{relatedContext:o,draggedContext:l});return n(r,t)},onDragEnd(){this.computeIndexes(),jt=null},getTrargetedComponent(e){return e.__draggable_component__},getRelatedContextFromMoveEvent({to:e,related:t}){const n=this.getTrargetedComponent(e);if(!n)return{component:n};const o=n.realList,l={list:o,component:n};if(e!==t&&o&&n.getUnderlyingVm){const a=n.getUnderlyingVm(t);if(a)return Object.assign(a,l)}return l},computeFutureIndex(e,t){const n=[...t.to.children].filter(r=>r.style.display!=="none");if(n.length===0)return 0;const o=n.indexOf(t.related),l=e.component.getVmIndex(o);return n.indexOf(jt)!==-1||!t.willInsertAfter?l:l+1}}}),Jd=U({props:{show:{type:Boolean,required:!0},info:{type:String}},setup(e,{emit:t}){return{handleClose:()=>{t("hidePopup")}}}}),Qd={class:"max-h-screen overflow-auto fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-80"},Zd={class:"bg-white p-6 rounded-xl mb-10 relative"},eu={key:0,class:"w-full"},tu=s("div",{class:"w-full mb-2"},[s("h3",{class:"text-lg"},"Organisation / School")],-1),nu=s("p",null,"Input expected: Text (Required)",-1),ou=s("p",null,"This field is the name of the school or organisation associated with the attendee. School names will attempt to match to the schools database, so try to be as accurate as possible.",-1),su=[tu,nu,ou],lu={key:1,class:"w-full"},au=s("div",{class:"w-full mb-2"},[s("h3",{class:"text-lg"},"URN")],-1),ru=s("p",null,"Input expected: Numeric (Not Required)",-1),iu=s("p",null,[F("This is the school's Unique Reference Number (URN). This field is not required and can be autocompleted during the import process if not known."),s("br"),s("br"),F("If the cell in the corresponding CSV row contains non-numeric characters or is longer than 8 characters, incorrect formatting will be assumed and null data will be entered.")],-1),du=[au,ru,iu],uu={key:2,class:"w-full"},cu=s("div",{class:"w-full mb-2"},[s("h3",{class:"text-lg"},"Postcode")],-1),pu=s("p",null,"Input expected: Alphanumeric (Not required)",-1),hu=s("p",null,[F("This is the school's post code. This field is not required and can be autocompleted during the import process, however it will assist when trying to match similarly named schools. "),s("br"),s("br"),F("If the cell in the corresponding CSV row exceeds more than 7 characters in length, incorrect formatting will be assumed and null data will be entered.")],-1),fu=[cu,pu,hu],gu={key:3,class:"w-full"},mu=s("div",{class:"w-full mb-2"},[s("h3",{class:"text-lg"},"Attendee Name")],-1),vu=s("p",null,"Input expected: Text (Required)",-1),bu=s("p",null,[F("The full name of the participant attending the event."),s("br"),s("br"),F("If the cell in the corresponding CSV row exceeds more than 256 characters in length, incorrect formatting will be assumed and null data will be entered. ")],-1),yu=[mu,vu,bu],_u={key:4,class:"w-full"},wu=s("div",{class:"w-full mb-2"},[s("h3",{class:"text-lg"},"Attendee Email Address")],-1),$u=s("p",null,"Input expected: Valid email or blank (Not Required)",-1),ku=s("p",null,"This field is the valid email of the participant.",-1),Su=[wu,$u,ku],xu={key:5,class:"w-full"},Cu=Ge('<div class="w-full mb-2"><h3 class="text-lg">Job Role</h3></div><p>Input expected: Text from a predefined list (Required)</p><ul class="text-left"><li><strong>na</strong>: Not Applicable</li><li><strong>support</strong>: Support Staff</li><li><strong>leader-middle</strong>: Middle Leader</li><li><strong>leader</strong>: Leadership</li><li><strong>teacher</strong>: Teacher</li></ul><p>If the cell in the corresponding CSV row does not match one of the list items above, Not Appicable or NA will be selected. </p>',4),Eu=[Cu],Tu={key:6,class:"w-full"},Du=s("div",{class:"w-full mb-2"},[s("h3",{class:"text-lg"},"Modules Attended")],-1),Au=s("p",null,"Input expected: Numeric from 1-15 (Not Required)",-1),Iu=s("p",null,[F("This field represents the number of modules the attendee participated in this event. A number from 1 to 15 is expected."),s("br"),s("br"),F("If the cell in the corresponding CSV row does not match 1-15, 1 will be automatically assumed.")],-1),Ou=[Du,Au,Iu],Nu={key:7,class:"w-full"},Fu=s("div",{class:"w-full mb-2"},[s("h3",{class:"text-lg"},"Newsletter")],-1),Pu=s("p",null,"Input expected: yes/no or y/n (Not Required)",-1),Mu=s("p",null,[F("This field informs us if the user wishes their email address be signed up to your Research School's mailing list."),s("br"),s("br"),F("If the cell in the corresponding CSV row does not match any of the expected inputs, no will be automatically assumed. ")],-1),Ru=[Fu,Pu,Mu];function qu(e,t,n,o,l,a){return p(),h("div",{class:M(["transition-all duration-500 delay-50 ease-in-out fixed left-0 top-0 w-screen h-screen",e.show?"z-[100] opacity-100 bg-gray-900 bg-opacity-50":"z-0 opacity-0 pointer-events-none"])},[s("div",Qd,[s("div",Zd,[e.info===1?(p(),h("div",eu,su)):w("",!0),e.info===2?(p(),h("div",lu,du)):w("",!0),e.info===3?(p(),h("div",uu,fu)):w("",!0),e.info===4?(p(),h("div",gu,yu)):w("",!0),e.info===5?(p(),h("div",_u,Su)):w("",!0),e.info===6?(p(),h("div",xu,Eu)):w("",!0),e.info===7?(p(),h("div",Tu,Ou)):w("",!0),e.info===8?(p(),h("div",Nu,Ru)):w("",!0),s("button",{onClick:t[0]||(t[0]=(...r)=>e.handleClose&&e.handleClose(...r)),class:"block bg-gray-300 text-gray-800 font-bold mt-2 py-2 px-3 text-sm rounded-lg cursor-pointer absolute right-2 top-0"}," \u2715 ")])])],2)}var Vu=Z(Jd,[["render",qu]]);const Lu=U({props:{csrf:{type:String,required:!0},event:{type:Number,required:!0},site:{type:String,required:!0},filepath:{type:String,required:!0},filename:{type:String,required:!0},columns:{type:Object,required:!0},submitForm:{type:Boolean}},setup(e){const t=b(null);return He(()=>{e.submitForm&&t.value&&t.value.submit()}),{form:t}}}),Bu={ref:"form",method:"post","accept-charset":"UTF-8"},Hu=["value"],ju=s("input",{type:"hidden",name:"action",value:"craft-attendees/csv/import-csv-columns"},null,-1),zu=["value"],Uu=["value"],Yu=["value"],Xu=["value"],Gu=["name","value"];function Wu(e,t,n,o,l,a){return p(),h("form",Bu,[s("input",{type:"hidden",name:"CRAFT_CSRF_TOKEN",value:e.csrf},null,8,Hu),ju,s("input",{type:"hidden",name:"filename",value:e.filepath},null,8,zu),s("input",{type:"hidden",name:"file",value:e.filename},null,8,Uu),s("input",{type:"hidden",name:"event",value:e.event},null,8,Yu),s("input",{type:"hidden",name:"site",value:e.site},null,8,Xu),(p(!0),h(K,null,be(e.columns,(r,d)=>(p(),h("input",{type:"hidden",name:`columns[${d}]`,value:r.value},null,8,Gu))),256))],512)}var Ku=Z(Lu,[["render",Wu]]);const Ju=U({components:{draggable:Kd,"popup-import":Vu,"form-import-match":Ku},props:{headers:{type:String,required:!0},filename:{type:String,default:""},filepath:{type:String,default:""},parent:{type:String,default:""},event:{type:String,required:!0},csrf:{type:String,required:!0},site:{type:String,required:!0}},setup(e){const t=b([{id:1,name:"Organisation / School",required:!0,info:"Text"},{id:2,name:"URN",required:!1,info:"Number"},{id:3,name:"Postcode",required:!1,info:"Text"},{id:4,name:"Attendee Name",required:!0,info:"Text"},{id:5,name:"Attendee Email Address",required:!1,info:"Text"},{id:6,name:"Job Role",required:!0,info:"Text exact match [na, support, leader-middle, leader, teacher]"},{id:7,name:"Modules attended",required:!0,info:"Number between 1 - 15"},{id:8,name:"Newsletter",required:!1,info:"Yes | No"}]),n=b(JSON.parse(e.headers)),o=b(t.value.length>n.value.length?t.value.length-n.value.length:0),l=b(JSON.parse(e.event)),a=b(!1),r=b(null),d=b(!1);for(let g=0;g<o.value;g++)n.value.push("");return n.value=n.value.map((g,y)=>({id:y,value:g})),{values:t,csvHeaders:n,popupId:r,showPopup:a,spacers:o,training:l,submitForm:d,handleRemove:g=>{n.value=n.value.map(y=>y.value===g?{id:y.id,value:""}:y)},handleSubmit:()=>{d.value=!0},handleCancel:()=>{var g;window.location.href=((g=e.parent)==null?void 0:g.length)>0?e.parent:"/"},handleHidePopup:()=>{a.value=!1,r.value=null},handleShowInfo:g=>{a.value=!0,r.value=g}}}}),Qu={class:"bg-gray-100 p-6 pt-10 -ml-6 relative mt-10"},Zu={class:"w-full flex field"},ec=s("div",{class:"heading flex-grow pr-10"},[s("label",{class:"text-xl inline-block w-full mb-2"},"Map fields into the correct order"),s("span",null,"The left column displays the fields from your CSV upload. Drag your fields and arrange them to match the expected input in the Attendees fields in the right column. Click the \u2715 icon to delete any columns not required for the upload.")],-1),tc={class:"w-full items-start mt-10 grid grid-cols-13"},nc={class:"col-span-6"},oc={class:"mb-4"},sc=s("span",{class:"font-primary text-lg font-bold block pb-2"},"CSV File fields",-1),lc={class:"block h-10"},ac={key:0,class:"bg-white rounded-xl mb-2 w-full px-4 py-2 box-border flex items-center cursor-move h-12"},rc=s("span",{class:"text-blue-600 text-xl leading-tight",style:{"margin-bottom":"0!important"}},"\u2725",-1),ic={class:"font-bold flex-grow",style:{"margin-bottom":"0!important"}},dc=["onClick"],uc={key:1,class:"bg-gray-200 rounded-xl mb-2 w-full px-4 box-border flex items-center cursor-move h-12 pt-2"},cc=s("span",{class:"text-blue-600 text-xl leading-tight"},"\u2725",-1),pc=s("span",{class:"italic text-gray-400"},"No value specified",-1),hc=[cc,pc],fc={class:"col-span-1 pt-20 mt-2.5"},gc=s("span",{class:"text-blue-600 inline-block text-xl"},"\u2192",-1),mc=[gc],vc={class:"col-span-6"},bc={class:"mb-4"},yc=s("span",{class:"font-primary text-lg font-bold block pb-2"},"Attendees fields",-1),_c={class:"block h-10"},wc={class:"font-bold inline-flex flex-grow items-center whitespace-nowrap",style:{"margin-bottom":"0!important"}},$c={key:0,class:"text-blue-500 inline-block pl-1 font-normal text-xs",style:{"margin-bottom":"0!important"}},kc={class:"whitespace-nowrap",style:{"margin-bottom":"0!important"}},Sc={key:0,class:"text-gray-400 italic text-xs"},xc=["onClick"],Cc=s("div",{class:"block bg-gray-100 w-6 left-full pb-6 top-0 h-full absolute"},null,-1),Ec=s("div",{class:"block bg-gray-100 h-6 top-full left-0 w-full absolute"},null,-1);function Tc(e,t,n,o,l,a){const r=L("draggable"),d=L("popup-import"),i=L("form-import-match");return p(),h("section",Qu,[s("div",Zu,[ec,s("button",{class:"bg-gray-300 text-gray-800 font-bold py-2 px-3 text-sm rounded-lg cursor-pointer",onClick:t[0]||(t[0]=(...u)=>e.handleCancel&&e.handleCancel(...u))},"Cancel"),s("button",{class:"bg-emerald-300 text-emerald-800 font-bold py-2 px-3 text-sm rounded-lg cursor-pointer",onClick:t[1]||(t[1]=(...u)=>e.handleSubmit&&e.handleSubmit(...u))},"Start import")]),s("div",tc,[s("div",nc,[s("div",oc,[sc,s("span",lc,"from: "+k(e.filename),1)]),B(r,{modelValue:e.csvHeaders,"onUpdate:modelValue":t[2]||(t[2]=u=>e.csvHeaders=u)},{default:Kt(()=>[(p(!0),h(K,null,be(e.csvHeaders,u=>(p(),h("div",{key:u.id},[u.value!==""?(p(),h("div",ac,[rc,s("span",ic,k(u.value),1),s("button",{onClick:c=>e.handleRemove(u.value),class:"text-gray-600 cursor-pointer",style:{"margin-bottom":"0!important"}},"\u2715",8,dc)])):(p(),h("div",uc,hc))]))),128))]),_:1},8,["modelValue"])]),s("div",fc,[(p(!0),h(K,null,be(e.values,u=>(p(),h("div",{key:u,class:"mb-2 w-full px-4 py-2 box-border flex items-center justify-center cursor-move h-12"},mc))),128))]),s("div",vc,[s("div",bc,[yc,s("span",_c,"to: "+k(e.training.title),1)]),(p(!0),h(K,null,be(e.values,u=>(p(),h("div",{key:u.id,class:"bg-white rounded-xl mb-2 w-full px-4 py-2 box-border flex flex-wrap items-center h-12 leading-tight"},[s("span",wc,[F(k(u.name)+" ",1),u.required?(p(),h("span",$c,"[required]")):w("",!0)]),s("div",kc,[u.info?(p(),h("span",Sc,k(u.info),1)):w("",!0),s("button",{onClick:c=>e.handleShowInfo(u.id),class:"text-blue-800 cursor-pointer font-bold ml-1"},"\u24D8",8,xc)])]))),128)),e.csvHeaders.length>e.values.length?(p(!0),h(K,{key:0},be(e.csvHeaders.length-e.values.length,(u,c)=>(p(),h("div",{key:c,class:"bg-gray-200 rounded-xl mb-2 w-full px-4 box-border flex items-center cursor-move h-12 pt-2"}," \xA0\xA0 "))),128)):w("",!0)])]),B(d,{show:e.showPopup,onHidePopup:e.handleHidePopup,info:e.popupId},null,8,["show","onHidePopup","info"]),B(i,{csrf:e.csrf,event:e.training.id,filepath:e.filepath,filename:e.filename,columns:e.csvHeaders,site:e.site,submitForm:e.submitForm},null,8,["csrf","event","filepath","filename","columns","site","submitForm"]),Cc,Ec])}var Dc=Z(Ju,[["render",Tc]]);const Ac=U({components:{"list-csv":Dc,"tabpane-attendees":ud}}),Ic=async()=>{const e=Zn(Ac);return e.use(eo()),e.mount("#training")};Ic().then(e=>{});
//# sourceMappingURL=attendees.bd238400.js.map
